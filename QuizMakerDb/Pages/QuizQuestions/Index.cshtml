@page
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery
@model QuizMakerDb.Pages.QuizQuestions.IndexModel
@{
	ViewData["Title"] = "Questions";

	var requestToken = Antiforgery.GetAndStoreTokens(HttpContext).RequestToken;
}

<input id="RequestVerificationToken" type="hidden" value="@requestToken" />

<div class="container-fluid">
	<div class="row d-flex flex-column justify-content-center align-items-center mt-4">
		<div class="col-xs-12 col-sm-12 col-md-10 col-lg-10 col-xl-9 col-xxl-8 mb-4">
			<div class="card">
				<div class="card-body p-5">
					<div class="row d-flex align-items-center justify-content-center">
						<div class="col-12 text-center">
							<h1>
								@Html.DisplayFor(modelItem => Model.QuizVM.Title)
							</h1>
						</div>
						<div class="col-md-8 text-center mt-4">
							<p>
								@Html.DisplayFor(modelItem => Model.QuizVM.Introduction)
							</p>
						</div>
						<div class="col-md-8 text-center mt-2 mb-2">
							<h4>Total Points: <span id="totalPoints"></span></h4>
						</div>
						<div class="col-md-12 text-center mb-2">
							<button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#questionTypeModal">Add Question</button>
						</div>
						<div class="col-md-12 text-center">
							<a href="/QuizSubjects?quizId=@Model.QuizVM.Id" class="btn btn-success">
								Publish Quiz
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="col-xs-12 col-sm-12 col-md-10 col-lg-10 col-xl-9 col-xxl-8 mb-4">
			<div class="row d-flex align-items-center justify-content-center gap-3" id="questionContainer">
			</div>
		</div>

	</div>
</div>

<!-- Question Type Modal -->
<div class="modal fade" id="questionTypeModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="questionTypeModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="questionTypeModalLabel">Choose Question Type</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="row d-flex align-items-center justify-content-center">
					<div class="col-4 grid-item">
						<button class="btn btn-primary btn-custom d-flex flex-column align-items-center justify-content-center" id="multipleChoiceBtn">
							<i class="bi bi-list-nested fs-3"></i>
							<span>Multiple Choice</span>
						</button>
					</div>
					<div class="col-4 grid-item">
						<button class="btn btn-danger btn-custom d-flex flex-column align-items-center justify-content-center" id="trueOrFalseBtn">
							<i class="bi bi-check-circle fs-3"></i>
							<span>True/False</span>
						</button>
					</div>
				</div>
				<div class="row mt-3">
					<div class="col-4 grid-item">
						<button class="btn btn-success btn-custom d-flex flex-column align-items-center justify-content-center" id="matchingBtn">
							<i class="bi bi-arrow-left-right fs-3"></i>
							<span>Matching</span>
						</button>
					</div>
					<div class="col-4 grid-item">
						<button class="btn btn-secondary btn-custom d-flex flex-column align-items-center justify-content-center text-light" id="sequencingBtn">
							<i class="bi bi-arrow-down-up fs-3"></i>
							<span>Sequencing</span>
						</button>
					</div>
					<div class="col-4 grid-item">
						<button class="btn btn-info btn-custom d-flex flex-column align-items-center justify-content-center text-light" id="numericBtn">
							<i class="bi bi-calculator fs-3"></i>
							<span>Numeric</span>
						</button>
					</div>
				</div>
				<div class="row d-flex align-items-center justify-content-center mt-3">
					<div class="col-4 grid-item">
						<button class="btn btn-dark btn-custom d-flex flex-column align-items-center justify-content-center text-light" id="enumerationBtn">
							<i class="bi bi-list-ol fs-3"></i>
							<span>Short Answer</span>
						</button>
					</div>
					<div class="col-4 grid-item">
						<button class="btn btn-warning btn-custom d-flex flex-column align-items-center justify-content-center text-light" id="fillInTheBlankBtn">
							<i class="bi bi-pencil fs-3"></i>
							<span>Long Answer</span>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Multiple Choice Modal -->
<div class="modal fade" id="multipleChoiceModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="multipleChoiceModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="mc_form" class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="multipleChoiceModalLabel">Multiple Choice</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="mc_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="mc_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="mc_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="mc_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-first order-md-last mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#mc_question_image_container', '#mc_input_image_file')">
								<div id="mc_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="mc_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row" id="mc_choices_container">
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" id="mc_submit_button">Create</button>
			</div>
		</form>
	</div>
</div>

<div class="modal fade" id="editMultipleChoiceModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editMultipleChoiceModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="e_mc_form" class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="editMultipleChoiceModalLabel">Multiple Choice (Edit)</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="e_mc_input_points" placeholder="Points" min="1" max="100" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="e_mc_input_points">Points</label>
							</div>
						</div>
					</div>        
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="e_mc_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="e_mc_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-first order-md-last mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#e_mc_question_image_container', '#e_mc_input_image_file')">
								<div id="e_mc_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="e_mc_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row" id="e_mc_choices_container">
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row w-100">
					<div class="col-6" id="e_mc_deleteButtonContainer">
					</div>
					<div class="col-6 text-end">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" id="e_mc_submit_button">Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>

<!-- True Or False Modal -->
<div class="modal fade" id="trueOrFalseModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="trueOrFalseModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="tf_form" class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="trueOrFalseModalLabel">True Or False</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="tf_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="tf_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="tf_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="tf_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#tf_question_image_container', '#tf_input_image_file')">
								<div id="tf_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="tf_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row" id="tf_choices_container">
						<div class="col-6">
							<div class="p-3 border rounded" onclick="toggleRadio('tf_radio_true')" style="cursor: pointer;">
								<div class="form-check d-flex align-items-center gap-3">
									<input class="form-check-input" type="radio" name="tf_radio" id="tf_radio_true" style="transform: scale(1.2);">
									<label class="form-check-label" for="tf_radio_true" style="cursor: pointer;">
										True
									</label>
								</div>
							</div>
						</div>
						<div class="col-6">
							<div class="p-3 border rounded" onclick="toggleRadio('tf_radio_false')" style="cursor: pointer;">
								<div class="form-check d-flex align-items-center gap-3">
									<input class="form-check-input" type="radio" name="tf_radio" id="tf_radio_false" style="transform: scale(1.2);">
									<label class="form-check-label" for="tf_radio_false" style="cursor: pointer;">
										False
									</label>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" id="tf_submit_button">Create</button>
			</div>
		</form>
	</div>
</div>

<div class="modal fade" id="editTrueOrFalseModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editTrueOrFalseModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="e_tf_form" class="modal-content">
			<input type="hidden" id="e_tf_id" />
			<input type="hidden" id="e_tf_order" />
			<input type="hidden" id="e_tf_a_id" />
			<input type="hidden" id="e_tf_a_order" />
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="editTrueOrFalseModalLabel">True Or False (Edit)</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="e_tf_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="e_tf_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="e_tf_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="e_tf_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#e_tf_question_image_container', '#e_tf_input_image_file')">
								<div id="e_tf_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="e_tf_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row" id="e_tf_choices_container">
						<div class="col-6">
							<div class="p-3 border rounded" onclick="toggleRadio('e_tf_radio_true')" style="cursor: pointer;">
								<div class="form-check d-flex align-items-center gap-3">
									<input class="form-check-input" type="radio" name="tf_radio" id="e_tf_radio_true" style="transform: scale(1.2);">
									<label class="form-check-label" for="e_tf_radio_true" style="cursor: pointer;">
										True
									</label>
								</div>
							</div>
						</div>
						<div class="col-6">
							<div class="p-3 border rounded" onclick="toggleRadio('e_tf_radio_false')" style="cursor: pointer;">
								<div class="form-check d-flex align-items-center gap-3">
									<input class="form-check-input" type="radio" name="tf_radio" id="e_tf_radio_false" style="transform: scale(1.2);">
									<label class="form-check-label" for="e_tf_radio_false" style="cursor: pointer;">
										False
									</label>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row w-100">
					<div class="col-6" id="e_tf_deleteButtonContainer">
					</div>
					<div class="col-6 text-end">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" id="e_tf_submit_button">Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>

<!-- Matching -->
<div class="modal fade" id="matchingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="matchingModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="m_form" class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="matchingModalLabel">Matching</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="m_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="m_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Instruction" id="m_instruction" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="m_instruction">Instruction</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#m_instruction_image_container', '#m_input_image_file')">
								<div id="m_instruction_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="m_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-12 mb-4">
							<div class="input-group input-group-lg">
								<div class="form-floating">
									<input type="search" class="form-control" id="m_item_input" placeholder="Item Name" aria-describedby="m_addItem" autocomplete="off" maxlength="100" oninput="m_checkItemInput()">
									<label for="m_item_input">Item Name</label>
								</div>
								<button class="btn btn-outline-secondary" type="button" id="m_addItemButton" onclick="m_addItem()">Add Item</button>
							</div>
						</div>
						<div class="col-12" id="m_itemListContainer">
							<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="m_emptyItemList">
								<i class="bi bi-list-ol fs-1 text-secondary"></i>
								<span class="fs-3 text-secondary">Empty List</span>
							</div>
						</div>
					</div>
					<div class="row mt-3" id="m_prompt_container"></div>
					<div class="row mt-3" id="m_add_prompt_button_container"></div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" id="m_submit_button">Create</button>
			</div>
		</form>
	</div>
</div>

<div class="modal fade" id="editMatchingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editMatchingModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="e_m_form" class="modal-content">
			<input type="hidden" id="e_m_id" />
			<input type="hidden" id="e_m_order" />
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="editMatchingModalLabel">Matching (Edit)</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="e_m_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="e_m_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Instruction" id="e_m_instruction" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="e_m_instruction">Instruction</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#e_m_instruction_image_container', '#e_m_input_image_file')">
								<div id="e_m_instruction_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="e_m_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-12 mb-4">
							<div class="input-group input-group-lg">
								<div class="form-floating">
									<input type="search" class="form-control" id="e_m_item_input" placeholder="Item Name" aria-describedby="e_m_addItem" autocomplete="off" maxlength="100" oninput="e_m_checkItemInput()">
									<label for="e_m_item_input">Item Name</label>
								</div>
								<button class="btn btn-outline-secondary" type="button" id="e_m_addItemButton" onclick="e_m_addItem()">Add Item</button>
							</div>
						</div>
						<div class="col-12" id="e_m_itemListContainer">
							<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="e_m_emptyItemList">
								<i class="bi bi-list-ol fs-1 text-secondary"></i>
								<span class="fs-3 text-secondary">Empty List</span>
							</div>
						</div>
					</div>
					<div class="row mt-3" id="e_m_prompt_container"></div>
					<div class="row mt-3" id="e_m_add_prompt_button_container"></div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row w-100">
					<div class="col-6" id="e_m_deleteButtonContainer">
					</div>
					<div class="col-6 text-end">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" id="e_m_submit_button">Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>

<!-- Sequencing -->
<div class="modal fade" id="sequencingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="sequencingModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="s_form" class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="sequencingModalLabel">Sequencing</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="s_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="s_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Instruction" id="s_instruction" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="s_instruction">Instruction</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#s_instruction_image_container', '#s_input_image_file')">
								<div id="s_instruction_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="s_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-12 mb-4">
							<div class="input-group input-group-lg">
								<div class="form-floating">
									<input type="search" class="form-control" id="s_item_input" placeholder="Prompt Name" aria-describedby="s_addItem" autocomplete="off" maxlength="100" oninput="s_checkItemInput()">
									<label for="s_item_input">Prompt Name</label>
								</div>
								<button class="btn btn-outline-secondary" type="button" id="s_addItemButton" onclick="s_addItem()">Add Prompt</button>
							</div>
						</div>
					</div>
					<div class="row mt-3" id="s_prompt_container"></div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" id="s_submit_button">Create</button>
			</div>
		</form>
	</div>
</div>

<div class="modal fade" id="editSequencingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editSequencingModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="e_s_form" class="modal-content">
			<input type="hidden" id="e_s_id" />
			<input type="hidden" id="e_s_order" />
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="editSequencingModalLabel">Sequencing (Edit)</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="e_s_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="e_s_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Instruction" id="e_s_instruction" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="e_s_instruction">Instruction</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#e_s_instruction_image_container', '#e_s_input_image_file')">
								<div id="e_s_instruction_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="e_s_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-12 mb-4">
							<div class="input-group input-group-lg">
								<div class="form-floating">
									<input type="search" class="form-control" id="e_s_item_input" placeholder="Prompt Name" aria-describedby="e_s_addItem" autocomplete="off" maxlength="100" oninput="e_s_checkItemInput()">
									<label for="e_s_item_input">Prompt Name</label>
								</div>
								<button class="btn btn-outline-secondary" type="button" id="e_s_addItemButton" onclick="e_s_addItem()">Add Prompt</button>
							</div>
						</div>
					</div>
					<div class="row mt-3" id="e_s_prompt_container"></div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row w-100">
					<div class="col-6" id="e_s_deleteButtonContainer">
					</div>
					<div class="col-6 text-end">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" id="e_s_submit_button">Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>

<!-- Matching Or Ordering Modal -->
<div class="modal fade" id="matchingOrOrderingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="matchingOrOrderingModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="mo_form" class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="matchingOrOrderingModalLabel">Matching Or Ordering</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="mo_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="mo_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Instruction" id="mo_instruction" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="mo_instruction">Instruction</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#mo_instruction_image_container', '#mo_input_image_file')">
								<div id="mo_instruction_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="mo_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-3 mb-4">
							<select class="form-select form-select-lg" id="mo_list_type" aria-label="List Type" onchange="changeListType()" style="height: 58px;">
								<option value="upper-alpha">Matching</option>
								<option value="decimal">Ordering</option>
							</select>
						</div>
						<div class="col-sm-12 col-md-9 mb-4">
							<div class="input-group input-group-lg">
								<div class="form-floating">
									<input type="search" class="form-control" id="mo_item_input" placeholder="Item Name" aria-describedby="addItem" autocomplete="off" maxlength="100" oninput="checkItemInput()">
									<label for="mo_item_input">Item Name</label>
								</div>
								<button class="btn btn-outline-secondary" type="button" id="addItemButton" onclick="addItem()">Add Item</button>
							</div>
						</div>
						<div class="col-12" id="itemListContainer">
							<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="emptyItemList">
								<i class="bi bi-list-ol fs-1 text-secondary"></i>
								<span class="fs-3 text-secondary">Empty List</span>
							</div>
						</div>
					</div>
					<div class="row mt-3" id="mo_prompt_container"></div>
					<div class="row mt-3" id="mo_add_prompt_button_container"></div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" id="mo_submit_button">Create</button>
			</div>
		</form>
	</div>
</div>

<div class="modal fade" id="editMatchingOrOrderingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editMatchingOrOrderingModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="mo_form" class="modal-content">
			<input type="hidden" id="e_mo_id" />
			<input type="hidden" id="e_mo_order" />
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="editMatchingOrOrderingModalLabel">Matching Or Ordering (Edit)</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="e_mo_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="e_mo_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Instruction" id="e_mo_instruction" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="e_mo_instruction">Instruction</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#e_mo_instruction_image_container', '#e_mo_input_image_file')">
								<div id="e_mo_instruction_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="e_mo_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-3 mb-4">
							<select class="form-select form-select-lg" id="e_mo_list_type" aria-label="List Type" onchange="e_changeListType()" style="height: 58px;">
								<option value="upper-alpha">Matching</option>
								<option value="decimal">Ordering</option>
							</select>
						</div>
						<div class="col-sm-12 col-md-9 mb-4">
							<div class="input-group input-group-lg">
								<div class="form-floating">
									<input type="search" class="form-control" id="e_mo_item_input" placeholder="Item Name" aria-describedby="addItem" autocomplete="off" maxlength="100" oninput="e_checkItemInput()">
									<label for="e_mo_item_input">Item Name</label>
								</div>
								<button class="btn btn-outline-secondary" type="button" id="e_addItemButton" onclick="e_addItem()">Add Item</button>
							</div>
						</div>
						<div class="col-12" id="e_itemListContainer">
							<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="e_emptyItemList">
								<i class="bi bi-list-ol fs-1 text-secondary"></i>
								<span class="fs-3 text-secondary">Empty List</span>
							</div>
						</div>
					</div>
					<div class="row mt-3" id="e_mo_prompt_container"></div>
					<div class="row mt-3" id="e_mo_add_prompt_button_container"></div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row w-100">
					<div class="col-6" id="e_mo_deleteButtonContainer">
					</div>
					<div class="col-6 text-end">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" id="e_mo_submit_button">Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>

<!-- Numeric Modal -->
<div class="modal fade" id="numericModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="numericModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="num_form" class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="numericModalLabel">Numeric</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="num_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="num_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="num_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="num_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#num_question_image_container', '#num_input_image_file')">
								<div id="num_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="num_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row" id="e_num_answer_container">
						<div class="col-12 mb-2">
							<div class="form-floating">
								<input type="text" class="form-control" id="num_input_answer" placeholder="Numeric Only" maxlength="100" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9,.\-%!]/g,'')">
								<label for="num_input_answer">Answer</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" id="num_submit_button">Create</button>
			</div>
		</form>
	</div>
</div>

<div class="modal fade" id="editNumericModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editNumericModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="num_form" class="modal-content">
			<input type="hidden" id="e_num_id" />
			<input type="hidden" id="e_num_order" />
			<input type="hidden" id="e_num_a_id" />
			<input type="hidden" id="e_num_a_order" />
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="editNumericModalLabel">Numeric (Edit)</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="e_num_input_points" placeholder="Points" min="1" max="100" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="e_num_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="e_num_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="e_num_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#e_num_question_image_container', '#e_num_input_image_file')">
								<div id="e_num_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="e_num_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row" id="e_num_answer_container">
						<div class="col-12 mb-2">
							<div class="form-floating">
								<input type="text" class="form-control" id="e_num_input_answer" placeholder="Numeric Only" maxlength="100" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="e_num_input_answer">Answer</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row w-100">
					<div class="col-6" id="e_num_deleteButtonContainer">
					</div>
					<div class="col-6 text-end">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" id="e_num_submit_button">Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>

<!-- Short Answer / Enumeration -->
<div class="modal fade" id="enumerationModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="enumerationModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="enum_form" class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="enumerationModalLabel">Short Answer</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="enum_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="enum_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="enum_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="enum_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#enum_question_image_container', '#enum_input_image_file')">
								<div id="enum_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="enum_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row" id="enum_answer_container"></div>
					<div class="row" id="add_more_answer_container">
						<div class="col-12 mt-2 mb-2 text-end">
							<button class="btn btn-outline-secondary" type="button" onclick="addMoreAnswer()">Add More Answer</button>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" id="enum_submit_button">Create</button>
			</div>
		</form>
	</div>
</div>

<div class="modal fade" id="editEnumerationModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editEnumerationModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="enum_form" class="modal-content">
			<input type="hidden" id="e_enum_id" />
			<input type="hidden" id="e_enum_order" />
			<input type="hidden" id="e_enum_a_id" />
			<input type="hidden" id="e_enum_a_order" />
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="editEnumerationModalLabel">Short Answer (Edit)</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="e_enum_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="e_enum_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="e_enum_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="e_enum_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#e_enum_question_image_container', '#e_enum_input_image_file')">
								<div id="e_enum_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="e_enum_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row" id="e_enum_answer_container"></div>
					<div class="row" id="e_add_more_answer_container">
						<div class="col-12 mt-2 mb-2 text-end">
							<button class="btn btn-outline-secondary" type="button" onclick="e_addMoreAnswer()">Add More Answer</button>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row w-100">
					<div class="col-6" id="e_enum_deleteButtonContainer">
					</div>
					<div class="col-6 text-end">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" id="e_enum_submit_button">Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>

<!-- Long Answer / fill In The Blank Modal -->
<div class="modal fade" id="fillInTheBlankModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="fillInTheBlankModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="fill_form" class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="fillInTheBlankModalLabel">Long Answer</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="fill_input_points" placeholder="Points" min="1" max="100" value="1" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="fill_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="fill_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="fill_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#fill_question_image_container', '#fill_input_image_file')">
								<div id="fill_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="fill_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row">
						<div class="col-12 mb-2">
							<div class="form-floating">
								<input type="text" class="form-control" id="fill_input_answer" placeholder="Answer" maxlength="100" autocomplete="off">
								<label for="fill_input_answer">Answer</label>
							</div>
						</div>
					</div>
					<div class="row" id="fill_answer_container"></div>
					<div class="row" id="add_alternative_answer_container">
						<div class="col-12 mt-2 mb-2 text-end">
							<button class="btn btn-outline-secondary" type="button" onclick="addAlternativeAnswer()">Add Alternative Answer</button>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" id="fill_submit_button">Create</button>
			</div>
		</form>
	</div>
</div>

<div class="modal fade" id="editFillInTheBlankModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editFillInTheBlankModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-lg-down modal-dialog-scrollable">
		<form id="fill_form" class="modal-content">
			<input type="hidden" id="e_fill_id" />
			<input type="hidden" id="e_fill_order" />
			<input type="hidden" id="e_fill_a_id" />
			<input type="hidden" id="e_fill_a_order" />
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="editFillInTheBlankModalLabel">Long Answer (Edit)</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-3 mb-4">
							<div class="form-floating">
								<input type="number" class="form-control" id="e_fill_input_points" placeholder="Points" min="1" max="100" autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g,'')">
								<label for="e_fill_input_points">Points</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 col-md-9 order-last order-sm-last order-md-first mb-4">
							<div class="form-floating">
								<textarea class="form-control" placeholder="Question" id="e_fill_question" maxlength="500" style="height: 150px; resize: none"></textarea>
								<label for="e_fill_question">Question</label>
							</div>
						</div>
						<div class="col-sm-12 col-md-3 order-first order-sm-last order-md-first mb-4">
							<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
								 style="min-height: 150px; border: #dee2e6; border-style: dashed; cursor: pointer;"
								 onclick="uploadImage('#e_fill_question_image_container', '#e_fill_input_image_file')">
								<div id="e_fill_question_image_container" class="custom-image-container rounded">
									<i class="bi bi-card-image fs-3 text-secondary"></i>
								</div>
							</div>
							<input type="file" id="e_fill_input_image_file" accept="image/*" style="display: none;" />
						</div>
					</div>
					<div class="row">
						<div class="col-12 mb-2">
							<div class="form-floating">
								<input type="text" class="form-control" id="e_fill_input_answer" placeholder="Answer" maxlength="100" autocomplete="off">
								<label for="e_fill_input_answer">Answer</label>
							</div>
						</div>
					</div>
					<div class="row" id="e_fill_answer_container"></div>
					<div class="row" id="add_alternative_answer_container">
						<div class="col-12 mt-2 mb-2 text-end">
							<button class="btn btn-outline-secondary" type="button" onclick="e_addAlternativeAnswer()">Add Alternative Answer</button>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row w-100">
					<div class="col-6" id="e_fill_deleteButtonContainer">
					</div>
					<div class="col-6 text-end">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" id="e_fill_submit_button">Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>

<!-- Image View Modal -->
<div class="modal fade" id="viewImageModal" tabindex="-1" aria-labelledby="viewImageModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="viewImageModalLabel">Uploaded Image</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body text-center">
				<img id="modalImage" src="" alt="Uploaded Image" class="img-fluid" />
			</div>
		</div>
	</div>
</div>

<!-- Alert Modal -->
<div class="modal fade" id="alertModal" tabindex="-1" aria-labelledby="alertModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header bg-danger text-light">
				<h5 class="modal-title" id="alertModalLabel">Alert</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p id="alertText"></p>
			</div>
		</div>
	</div>
</div>

<!-- Success Toast -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
	<div id="successToast" class="toast bg-success" role="alert" aria-live="assertive" aria-atomic="true">
		<div class="toast-header">
			<i class="bi bi-check2-circle me-2"></i>
			<strong class="me-auto">Success</strong>
			<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
		</div>
		<div class="toast-body text-white">
			Question is Successfully Added!
		</div>
	</div>
</div>

<!-- Updated Toast -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
	<div id="updatedToast" class="toast bg-success" role="alert" aria-live="assertive" aria-atomic="true">
		<div class="toast-header">
			<i class="bi bi-check2-circle me-2"></i>
			<strong class="me-auto">Success</strong>
			<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
		</div>
		<div class="toast-body text-white">
			Question is Successfully Updated!
		</div>
	</div>
</div>

<!-- Deleted Toast -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
	<div id="deletedToast" class="toast bg-success" role="alert" aria-live="assertive" aria-atomic="true">
		<div class="toast-header">
			<i class="bi bi-check2-circle me-2"></i>
			<strong class="me-auto">Success</strong>
			<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
		</div>
		<div class="toast-body text-white">
			Question is Successfully Deleted!
		</div>
	</div>
</div>

<!-- Danger Toast -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
	<div id="dangerToast" class="toast bg-danger" role="alert" aria-live="assertive" aria-atomic="true">
		<div class="toast-header">
			<i class="bi bi-check2-circle me-2"></i>
			<strong class="me-auto">Alert</strong>
			<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
		</div>
		<div class="toast-body text-white">
			Can't add question this time, try again later.
		</div>
	</div>
</div>

@section Scripts {
	<script>
		var tempQuestionData;
		var questionType;
		var totalPoints = 0;

		$(document).ready(function () {
			$('#e_enum_submit_button').on('click', function () {
				checkEditedEnumeration();
			});

			$('#editEnumerationModal').on('hidden.bs.modal', function () {
				editEnumerationHidden();
			});

			$('#enum_submit_button').on('click', function () {
				checkEnumeration();
			});

			$('#enumerationModal').on('hidden.bs.modal', function () {
				enumerationHidden();
			});

			$('#enumerationModal').on('shown.bs.modal', function () {
				enumerationShown();
			});

			$('#enumerationBtn').on('click', function () {
				$('#questionTypeModal').modal('hide');
				$('#enumerationModal').modal('show');
			});

			$('#e_fill_submit_button').on('click', function () {
				checkEditedFillInTheBlank();
			});

			$('#editFillInTheBlankModal').on('hidden.bs.modal', function () {
				editFillInTheBlankHidden();
			});

			$('#fill_submit_button').on('click', function () {
				checkFillInTheBlank();
			});

			$('#fillInTheBlankModal').on('hidden.bs.modal', function () {
				fillInTheBlankHidden();
			});

			$('#fillInTheBlankModal').on('shown.bs.modal', function () {
				fillInTheBlankShown();
			});

			$('#fillInTheBlankBtn').on('click', function () {
				$('#questionTypeModal').modal('hide');
				$('#fillInTheBlankModal').modal('show');
			});

			$('#e_num_submit_button').on('click', function () {
				checkEditedNumeric();
			});

			$('#editNumericModal').on('hidden.bs.modal', function () {
				editNumericHidden();
			});

			$('#num_submit_button').on('click', function () {
				checkNumeric();
			});

			$('#numericModal').on('hidden.bs.modal', function () {
				numericHidden();
			});

			$('#numericModal').on('shown.bs.modal', function () {
				numericShown();
			});

			$('#numericBtn').on('click', function () {
				$('#questionTypeModal').modal('hide');
				$('#numericModal').modal('show');
			});

			$('#e_s_submit_button').on('click', function () {
				checkEditedSequencing();
			});

			$('#editSequencingModal').on('hidden.bs.modal', function () {
				editSequencingHidden();
			});

			$('#s_submit_button').on('click', function () {
				checkSequencing();
			});

			$('#sequencingModal').on('hidden.bs.modal', function () {
				sequencingHidden();
			});

			$('#sequencingModal').on('shown.bs.modal', function () {
				sequencingShown();
			});

			$('#sequencingBtn').on('click', function () {
				$('#questionTypeModal').modal('hide');
				$('#sequencingModal').modal('show');
			});

			$('#e_m_submit_button').on('click', function () {
				checkEditedMatching();
			});

			$('#editMatchingModal').on('hidden.bs.modal', function () {
				editMatchingHidden();
			});

			$('#m_submit_button').on('click', function () {
				checkMatching();
			});

			$('#matchingModal').on('hidden.bs.modal', function () {
				matchingHidden();
			});

			$('#matchingModal').on('shown.bs.modal', function () {
				matchingShown();
			});

			$('#matchingBtn').on('click', function () {
				$('#questionTypeModal').modal('hide');
				$('#matchingModal').modal('show');
			});

			$('#e_tf_submit_button').on('click', function () {
				checkEditedTrueOrFalse();
			});

			$('#editTrueOrFalseModal').on('hidden.bs.modal', function () {
				editTrueOrFalseHidden();
			});

			$('#tf_submit_button').on('click', function () {
				checkTrueOrFalse();
			});

			$('#trueOrFalseModal').on('hidden.bs.modal', function () {
				trueOrFalseHidden();
			});

			$('#trueOrFalseModal').on('shown.bs.modal', function () {
				trueOrFalseShown();
			});

			$('#trueOrFalseBtn').on('click', function () {
				$('#questionTypeModal').modal('hide');
				$('#trueOrFalseModal').modal('show');
			});

			$('#e_mc_submit_button').on('click', function () {
				checkEditedMultipleChoice();
			});

			$('#editMultipleChoiceModal').on('hidden.bs.modal', function () {
				editMultipleChoiceHidden();
			});

			$('#mc_submit_button').on('click', function () {
				checkMultipleChoice();
			});

			$('#multipleChoiceModal').on('hidden.bs.modal', function () {
				multipleChoiceHidden();
			});

			$('#multipleChoiceModal').on('shown.bs.modal', function () {
				multipleChoiceShown();
			});

			$('#multipleChoiceBtn').on('click', function () {
				$('#questionTypeModal').modal('hide');
				$('#multipleChoiceModal').modal('show');
			});

			loadQuestions();
		});

		function viewImage(imageSrc, event) {
			event.preventDefault();
			event.stopPropagation();
			$('#modalImage').attr('src', imageSrc);
			$('#viewImageModal').modal('show');
		}

		function removeImage(containerId, fileId, event) {
			event.preventDefault();
			event.stopPropagation();
			$(containerId).empty().append('<i class="bi bi-card-image fs-3 text-secondary"></i>');
			$(fileId).val('');
		}

		function showImage(containerId, fileId, base64) {
			if (!base64.startsWith('data:image/')) {
				console.error('Invalid Base64 image data.');
				return;
			}

			const image = `<img src="${base64}" class="custom-uploaded-image" />`;
			const buttonContainer = $('<div class="custom-button-container"></div>');

			const viewButton = `<button class="custom-view-image" onclick="viewImage('${base64}', event)"><i class="bi bi-eye"></i></button>`;
			const deleteButton = `<button class="custom-remove-image" onclick="removeImage('${containerId}', '${fileId}', event)"><i class="bi bi-trash"></i></button>`;

			$(containerId).empty().append(image).append(buttonContainer.append(viewButton, deleteButton));
		}

		function uploadImage(containerId, fileId) {
			$(fileId).click();

			$(fileId).off('change').on('change', function (event) {
				const file = event.target.files[0];
				if (file) {
					const validTypes = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/svg+xml'];

					if (!validTypes.includes(file.type)) {
						$('#alertText').text('Please select a valid image file!');
						$('#alertModal').modal('show');
					} else {
						const reader = new FileReader();
						reader.onload = function (e) {
							const image = `<img src="${e.target.result}" class="custom-uploaded-image" />`;
							const buttonContainer = $('<div class="custom-button-container"></div>');
							const viewButton = `<button class="custom-view-image" onclick="viewImage('${e.target.result}', event)"><i class="bi bi-eye"></i></button>`;
							const deleteButton = `<button class="custom-remove-image" onclick="removeImage('${containerId}', '${fileId}', event)"><i class="bi bi-trash"></i></button>`;

							$(containerId).empty().append(image).append(buttonContainer.append(viewButton, deleteButton));
						};
						reader.readAsDataURL(file);
					}
				}
			});
		}

		function clearValidationMessages(question) {
			$('.error-message').remove();

			switch (question) {
				case 0:
					$('#mc_choices_container .choice-container input[type="text"]').removeClass('is-invalid');
					$('#mc_input_points').removeClass('is-invalid');
					$('#mc_question').removeClass('is-invalid');
					$('#e_mc_choices_container .choice-container input[type="text"]').removeClass('is-invalid');
					$('#e_mc_input_points').removeClass('is-invalid');
					$('#e_mc_question').removeClass('is-invalid');
					break;

				case 1:
					$('#tf_input_points').removeClass('is-invalid');
					$('#tf_question').removeClass('is-invalid');
					$('#e_tf_input_points').removeClass('is-invalid');
					$('#e_tf_question').removeClass('is-invalid');
					break;

				case 2:
					$('#m_input_points').removeClass('is-invalid');
					$('#m_instruction').removeClass('is-invalid');
					$('#e_m_input_points').removeClass('is-invalid');
					$('#e_m_instruction').removeClass('is-invalid');
					break;

				case 3:
					$('#s_input_points').removeClass('is-invalid');
					$('#s_instruction').removeClass('is-invalid');
					$('#e_s_input_points').removeClass('is-invalid');
					$('#e_s_instruction').removeClass('is-invalid');
					break;

				case 4:
					$('#num_input_points').removeClass('is-invalid');
					$('#num_question').removeClass('is-invalid');
					$('#num_input_answer').removeClass('is-invalid');
					$('#e_num_input_points').removeClass('is-invalid');
					$('#e_num_question').removeClass('is-invalid');
					$('#e_num_input_answer').removeClass('is-invalid');
					break;

				case 5:
					$('#enum_input_points').removeClass('is-invalid');
					$('#enum_question').removeClass('is-invalid');
					$('#enum_more_answer_1').removeClass('is-invalid');
					$('#enum_more_answer_2').removeClass('is-invalid');
					$('#e_enum_input_points').removeClass('is-invalid');
					$('#e_enum_question').removeClass('is-invalid');
					$('#e_enum_more_answer_1').removeClass('is-invalid');
					$('#e_enum_more_answer_2').removeClass('is-invalid');
					break;

				case 6:
					$('#enum_input_points').removeClass('is-invalid');
					$('#enum_question').removeClass('is-invalid');
					$('#enum_input_answer').removeClass('is-invalid');
					$('#e_enum_input_points').removeClass('is-invalid');
					$('#e_enum_question').removeClass('is-invalid');
					$('#e_enum_input_answer').removeClass('is-invalid');
					break;

				default:
					alert('Clear Validation: Unknown question type:', question);
			}
		}

		function showError(inputId, message) {
			$(inputId).addClass('is-invalid');
			$(inputId).next('.error-message').remove();
			$(inputId).after(`<span class="field-validation-error error-message text-danger">${message}</span>`);
		}

		function isValidNumber(value) {
			return value > 0 && value <= 100;
		}

		function isValidQuestion(question) {
			return question.trim() !== '';
		}

		function closeModal(questionType, modalType) {
			if (modalType === 'create') {
				switch (questionType) {
					case 0:
						$('#multipleChoiceModal').modal('hide');
						break;

					case 1:
						$('#trueOrFalseModal').modal('hide');
						break;

					case 2:
						$('#matchingModal').modal('hide');
						break;

					case 3:
						$('#sequencingModal').modal('hide');
						break;

					case 4:
						$('#numericModal').modal('hide');
						break;

					case 5:
						$('#enumerationModal').modal('hide');
						break;

					case 6:
						$('#fillInTheBlankModal').modal('hide');
						break;

					default:
						alert('Close Modal: Unknown question type:', question);
				}
			} else {
				switch (questionType) {
					case 0:
						$('#editMultipleChoiceModal').modal('hide');
						break;

					case 1:
						$('#editTrueOrFalseModal').modal('hide');
						break;

					case 2:
						$('#editMatchingModal').modal('hide');
						break;

					case 3:
						$('#editSequencingModal').modal('hide');
						break;

					case 4:
						$('#editNumericModal').modal('hide');
						break;

					case 5:
						$('#editEnumerationModal').modal('hide');
						break;

					case 6:
						$('#editFillInTheBlankModal').modal('hide');
						break;

					default:
						alert('Close Modal: Unknown question type:', question);
				}
			}
		}

		function removeQuestion(questionId, questionType) {
			$.ajax({
				url: '/QuizQuestions/Update?handler=RemoveQuestion',
				type: 'POST',
				dataType: 'json',
				contentType: 'application/json',
				headers: {
					"X-CSRF-TOKEN": $('#RequestVerificationToken').val()
				},
				data: JSON.stringify({
					questionId: questionId
				}),
				success: function (response) {
					if (response === 'OK') {
						closeModal(questionType, 'edit');

						loadQuestions();

						$('#deletedToast').toast({
							autohide: true,
							delay: 3000
						}).toast('show');
					}
				},
				error: function (xhr) {
					console.error("Error updating order:", xhr.responseText);
				}
			});
		}

		function changeOrder(questionId, direction) {
			event.stopPropagation();

			$.ajax({
				url: '/QuizQuestions/Update?handler=ChangeOrder',
				type: 'POST',
				dataType: 'json',
				contentType: 'application/json',
				headers: {
					"X-CSRF-TOKEN": $('#RequestVerificationToken').val()
				},
				data: JSON.stringify({
					questionId: questionId,
					direction: direction
				}),
				success: function (response) {
					if (response === 'OK') {
						loadQuestions();
					}
				},
				error: function (xhr) {
					console.error("Error updating order:", xhr.responseText);
				}
			});
		}

		function updateQuestion(data, questionType) {
			$.ajax({
				url: '/QuizQuestions/Update?handler=UpdateQuestion',
				type: 'POST',
				dataType: 'json',
				contentType: 'application/json',
				headers: {
					"X-CSRF-TOKEN": $('#RequestVerificationToken').val()
				},
				data: JSON.stringify(data),
				success: function (response) {
					if (response === 'OK') {
						closeModal(questionType, 'edit');

						loadQuestions();

						$('#updatedToast').toast({
							autohide: true,
							delay: 3000
						}).toast('show');
					} else {
						console.error("error");
					}
				},
				error: function (jqXHR, textStatus, errorThrown) {
					console.error('Error submitting question:', textStatus, errorThrown);
					console.log('Response:', jqXHR.responseText);

					$('#dangerToast').toast({
						autohide: true,
						delay: 3000
					}).toast('show');
				}
			});
		}

		function submitQuestion(questionData, questionType) {
			$.ajax({
				type: 'POST',
				url: '/QuizQuestions/Create',
				contentType: 'application/json',
				headers: {
					"X-CSRF-TOKEN": $('#RequestVerificationToken').val()
				},
				data: JSON.stringify(questionData),
				success: function (response) {
					if (response === "OK") {
						closeModal(questionType, 'create');

						loadQuestions();

						$('#successToast').toast({
							autohide: true,
							delay: 3000
						}).toast('show');
					}
				},
				error: function (jqXHR, textStatus, errorThrown) {
					console.error('Error submitting question:', textStatus, errorThrown);
					console.log('Response:', jqXHR.responseText);

					$('#dangerToast').toast({
						autohide: true,
						delay: 3000
					}).toast('show');
				}
			});
		}

		function editQuestion(card) {
			var question = $(card).data('question');
			var questionType = question.questionType;

			switch (questionType) {
				case 0:
					editMultipleChoice(question);
					break;

				case 1:
					editTrueOrFalse(question);
					break;

				case 2:
					editMatching(question);
					break;
					
				case 3:
					editSequencing(question);
					break;

				case 4:
					editNumeric(question);
					break;

				case 5:
					editEnumeration(question);
					break;

				case 6:
					editFillInTheBlank(question);
					break;

				default:
					alert('Edit Question: Unknown question type:', question);
			}
		}

		function escapeHtml(str) {
			return str.replace(/[&<>"'\/]/g, function (match) {
				const escapeChars = {
					'&': '&amp;',
					'<': '&lt;',
					'>': '&gt;',
					'"': '&quot;',
					"'": '&#39;',
					'/': '&#47;'
				};
				return escapeChars[match];
			});
		}

		function displayQuestions(data) {
			var questionContainer = $('#questionContainer');
			questionContainer.empty();

			if (data.length === 0) {
				var emptyQuestions = `
								<div class="col-12">
									<div class="text-center text-secondary">
										<i class="bi bi-question-circle" style="font-size: 5rem;"></i>
										<h1>No questions available.</h1>
									</div>
								</div>
							`;

				questionContainer.append(emptyQuestions);
				$('#publishButton').prop('disabled', true);
			} else {
				totalPoints = 0;

				$.each(data, function (index, question) {

					totalPoints += question.points;

					var questionType = '';
					var questionDescription = '';
					var questionAnswers = '';

					switch (question.questionType) {
						case 0:
							questionType = 'Multiple Choice';
							questionDescription = `Question: ${question.description}`;
							break;

						case 1:
							questionType = 'True Or False';
							questionDescription = `Question: ${question.description}`;
							break;

						case 2:
							questionType = 'Matching';
							questionDescription = `Instruction: ${question.description}`;
							break;

						case 3:
							questionType = 'Sequencing';
							questionDescription = `Instruction: ${question.description}`;
							break;

						case 4:
							questionType = 'Numeric';
							questionDescription = `Question: ${question.description}`;
							break;

						case 5:
							questionType = 'Short Answer';
							questionDescription = `Question: ${question.description}`;
							break;

						case 6:
							questionType = 'Long Answer';
							questionDescription = `Question: ${question.description}`;
							break;

						default:
							alert('Description: Unknown question type:', question);
					}

					var escapedDescription = escapeHtml(question.description);

					var questionJson = JSON.stringify(question);

					var escapedQuestionJson = escapeHtml(questionJson);

					var questionCard = `
									<div class="col-12">
										<div class="card custom-card" data-question='${escapedQuestionJson}' style="cursor: pointer;" onclick="editQuestion(this)">
											<div class="card-body">
												<div class="row">
													<div class="col-10 col-md-11">
														<h4>${questionType}</h4>
														<p>${escapedDescription}</p>
														<div class="answerContainer d-flex align-items-center"><span id="answerType"></span>${questionAnswers}</div>
													</div>
													<div class="col-2 col-md-1 text-end">
														<div class="btn-group-vertical" role="group">
															<button type="button" class="btn btn btn-outline-secondary" onclick="changeOrder(${question.id}, 'up')">
																<i class="bi bi-chevron-up"></i>
															</button>
															<button type="button" class="btn btn-outline-secondary" onclick="changeOrder(${question.id}, 'down')">
																<i class="bi bi-chevron-down"></i>
															</button>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								`;

					questionContainer.append(questionCard);

					var answerContainer = questionContainer.find('.answerContainer').last();

					if (question.questionType === 2 || question.questionType === 3) {
						answerContainer.find('#answerType').text('Prompts:');
					} else {
						answerContainer.find('#answerType').text('Answers:');
					}

					$.each(question.answers, function (index, answer) {
						if (answer.isCorrect) {
							var answerMarkup = `<div class="d-flex"><div class="border text-center pt-1 pb-1 ps-2 pe-2 rounded-5 m-1">${answer.answer}</div></div>`;
							answerContainer.append(answerMarkup);
						}
					});
				});

				$('#publishButton').prop('disabled', false);
			}

			$('#totalPoints').text(totalPoints);
		}

		function loadQuestions() {
			$.ajax({
				type: 'GET',
				url: '/QuizQuestions/LoadQuestions?handler=Questions',
				data: {
					quizId: parseInt("@Model.QuizVM.Id")
				},
				success: function (data) {
					if (data.message === "OK") {
						tempQuestionData = data.questions;
						displayQuestions(data.questions);
					} else {
						console.error(data.message);
					}
				},
				error: function (jqXHR, textStatus, errorThrown) {
					console.error('Error submitting question:', textStatus, errorThrown);
					console.log('Response:', jqXHR.responseText);
				}
			});
		}
	</script>

	<!-- Multiple Choice Script -->
	<script>
		var mc_container = $('#mc_choices_container');
		var mc_minimum_choices = 4;
		var mc_choices = 0;
		var e_mc_choices = 0;
		var multipleChoiceData = {
			quizId: 0,
			description: '',
			order: '',
			questionType: 0,
			points: 0,
			image: '',
			answers: [],
			items: [],
			active: false
		};

		var e_multipleChoiceData = {
			id: 0,
			description: '',
			order: 0,
			questionType: 0,
			points: 0,
			image: '',
			answers: [],
			items: [],
			active: false
		};

		var og_multipleChoiceData;

		function gatherEditedMultipleChoiceData() {
			e_multipleChoiceData.id = parseInt($('#e_mc_id').val());
			e_multipleChoiceData.description = $('#e_mc_question').val();
			e_multipleChoiceData.questionType = 0;
			e_multipleChoiceData.order = parseInt($('#e_mc_order').val());
			e_multipleChoiceData.points = parseInt($('#e_mc_input_points').val());
			e_multipleChoiceData.image = null;
			e_multipleChoiceData.answers = [];
			e_multipleChoiceData.items = [];
			e_multipleChoiceData.active = true;

			if ($('#e_mc_question_image_container img').attr('src')) {
				var base64Image = $('#e_mc_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				e_multipleChoiceData.image = base64Data;
			}

			$('.e-choice-container').each(function (index) {
				var choiceText = $(this).find('input[type="text"]').val();
				var tempImage = $(this).find('img').attr('src');
				var choiceImage = null;
				var isCorrect = $(this).find('input[type="radio"]').is(':checked');

				if (tempImage != null) {
					var base64Image = tempImage;
					var base64Data = base64Image.split(',')[1];

					choiceImage = base64Data;
				}

				if (choiceText.trim() !== '') {
					var originalAnswer = og_multipleChoiceData.answers[index];
					if (originalAnswer) {
						e_multipleChoiceData.answers.push({
							id: originalAnswer.id,
							answer: choiceText,
							isCorrect: isCorrect,
							showAnswer: true,
							order: (index + 1).toString(),
							image: choiceImage,
							active: true
						});
					} else {
						e_multipleChoiceData.answers.push({
							id: 0,
							answer: choiceText,
							isCorrect: isCorrect,
							showAnswer: true,
							order: (index + 1).toString(),
							image: choiceImage,
							active: true
						});
					}
				}
			});
		}

		function checkEditedMultipleChoice() {
			event.preventDefault();
			gatherEditedMultipleChoiceData();
			clearValidationMessages(0);

			var points = e_multipleChoiceData.points;
			var question = e_multipleChoiceData.description;
			var choices = e_multipleChoiceData.answers;

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#e_mc_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#e_mc_question', 'Please enter a question.');
				valid = false;
			}

			$('#e_mc_choices_container .e-choice-container').each(function (index) {
				const choiceInput = $(this).find('input[type="text"]');
				const choiceText = choiceInput.val().trim();

				if (choiceText === '') {
					showError(choiceInput, 'Choice cannot be empty.');
					choiceInput.addClass('is-invalid');
					valid = false;
				} else {
					choiceInput.removeClass('is-invalid');
				}
			});

			if (valid) updateQuestion(e_multipleChoiceData, 0);
		}

		function deactivateAnswer(answerId) {
			const answer = e_multipleChoiceData.answers.find(ans => ans.id === answerId);

			if (answer) {
				answer.active = false;
			}
		}

		function e_checkAnotherChoiceInput(inputElement, id) {
			if ($(inputElement).val().trim() === '') {
				$(inputElement).closest('.e-choice-container').slideUp(300, function () {
					deactivateAnswer(id);
					$(this).remove();

					if ($('.form-check-input:checked').length === 0) {
						$('#e_mc_choice_radio_1').prop('checked', true);
					}
				});
			}
		}

		function e_addMoreMultipleChoice() {
			e_mc_choices++;

			var choice = `
						<div class="col-12 mb-2 e-choice-container" id="e_choice_container_${e_mc_choices}" style="display: none;">
							<div class="row">
								<div class="col-sm-12 col-md-10 mb-2">
									<div class="form-check d-flex align-items-center gap-3">
										<input class="form-check-input" type="radio" name="e_mc_choice_radio" id="e_mc_choice_radio_${e_mc_choices}" style="transform: scale(1.2);">
										<div class="form-floating w-100">
											<input type="text" class="form-control" id="e_mc_choice_${e_mc_choices}" placeholder="Choice #${e_mc_choices}" maxlength="100" value="Another Choice" onchange="e_checkAnotherChoiceInput(this)">
											<label for="e_mc_choice_${e_mc_choices}">Another Choice</label>
										</div>
									</div>
								</div>
								<div class="col-sm-12 col-md-2 ps-md-0 mb-2">
									<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
										style="border: #dee2e6; border-style: dashed; cursor: pointer;"
										onclick="uploadImage('#e_mc_choice_image_container_${e_mc_choices}', '#e_mc_choice_input_image_file_${e_mc_choices}')">
										<div id="e_mc_choice_image_container_${e_mc_choices}" class="custom-image-container rounded" style="height: 55px;">
											<i class="bi bi-card-image fs-3 text-secondary"></i>
										</div>
									</div>
									<input type="file" id="e_mc_choice_input_image_file_${e_mc_choices}" accept="image/*" style="display: none;" />
								</div>
							</div>
						</div>
					`;

			$('#e_addMoreButtonContainer').before(choice);
			$(`#e_choice_container_${e_mc_choices}`).slideDown(300);
		}

		function editMultipleChoice(data) {
			og_multipleChoiceData = data;
			var e_mc_choices_container = $('#e_mc_choices_container');
			$('#e_mc_input_points').val(data.points);
			$('#e_mc_question').val(data.description);

			var deleteButtonContainer = $('#e_mc_deleteButtonContainer');

			deleteButtonContainer.empty();

			var deleteButton = `<button type="button" class="btn btn-danger text-start" onclick="removeQuestion(${data.id}, ${data.questionType});">Delete</button>`

			deleteButtonContainer.append(deleteButton);

			if (data.image != '') {
				showImage('#e_mc_question_image_container', '#e_mc_input_image_file', data.image);
			} else {
				removeImage('#e_mc_question_image_container', '#e_mc_input_image_file', event);
			}

			e_mc_choices_container.empty();

			$.each(data.answers, function (index, answer) {
				index++;

				var isChecked = answer.isCorrect ? 'checked' : '';

				if (index <= mc_minimum_choices) {
					var choice = `
								<div class="col-12 mb-2 e-choice-container" id="e_choice_container_${index}" style="display: none;">
									<input type="hidden" id="e_mc_id" value="${data.id}" />
									<input type="hidden" id="e_mc_order" value="${data.order}" />
									<div class="row">
										<div class="col-sm-12 col-md-10 mb-2">
											<div class="form-check d-flex align-items-center gap-3">
												<input class="form-check-input" type="radio" name="e_mc_choice_radio" id="e_mc_choice_radio_${index}" style="transform: scale(1.2);" ${isChecked}>
												<div class="form-floating w-100">
													<input type="text" class="form-control" id="e_mc_choice_${index}" placeholder="Choice #${index}" maxlength="100" value="${answer.answer}">
													<label for="e_mc_choice_${index}">Choice #${index}</label>
												</div>
											</div>
										</div>
										<div class="col-sm-12 col-md-2 ps-md-0 mb-2">
											<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
												style="border: #dee2e6; border-style: dashed; cursor: pointer;"
												onclick="uploadImage('#e_mc_choice_image_container_${index}', '#e_mc_choice_input_image_file_${index}')">
												<div id="e_mc_choice_image_container_${index}" class="custom-image-container rounded" style="height: 55px;">
													<i class="bi bi-card-image fs-3 text-secondary"></i>
												</div>
											</div>
											<input type="file" id="e_mc_choice_input_image_file_${index}" accept="image/*" style="display: none;" />
										</div>
									</div>
								</div>
							`;

					e_mc_choices_container.append(choice);
					$(`#e_choice_container_${index}`).slideDown(300);

					if (index === mc_minimum_choices) {
						var addMoreButton = `
										<div class="col-12 mt-2 mb-2 text-end" id="e_addMoreButtonContainer">
											<button class="btn btn-outline-secondary" type="button" onclick="e_addMoreMultipleChoice()">Add Another Choice</button>
										</div>
									`;

						e_mc_choices_container.append(addMoreButton);
					}

					e_mc_choices = index;
				} else {
					var choice = `
									<div class="col-12 mb-2 e-choice-container" id="e_choice_container_${index}" style="display: none;">
										<div class="row">
											<div class="col-sm-12 col-md-10 mb-2">
												<div class="form-check d-flex align-items-center gap-3">
													<input class="form-check-input" type="radio" name="e_mc_choice_radio" id="e_mc_choice_radio_${index}" style="transform: scale(1.2);" ${isChecked}>
													<div class="form-floating w-100">
														<input type="text" class="form-control" id="e_mc_choice_${index}" placeholder="Choice #${index}" maxlength="100" data-answer='${JSON.stringify(answer)}' value="${answer.answer}" onchange="e_checkAnotherChoiceInput(this, ${answer.id})">
														<label for="e_mc_choice_${index}">Another Choice</label>
													</div>
												</div>
											</div>
											<div class="col-sm-12 col-md-2 ps-md-0 mb-2">
												<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
													style="border: #dee2e6; border-style: dashed; cursor: pointer;"
													onclick="uploadImage('#e_mc_choice_image_container_${index}', '#e_mc_choice_input_image_file_${index}')">
													<div id="e_mc_choice_image_container_${index}" class="custom-image-container rounded" style="height: 55px;">
														<i class="bi bi-card-image fs-3 text-secondary"></i>
													</div>
												</div>
												<input type="file" id="e_mc_choice_input_image_file_${index}" accept="image/*" style="display: none;" />
											</div>
										</div>
									</div>
								`;

					$('#e_addMoreButtonContainer').before(choice);
					$(`#e_choice_container_${index}`).slideDown(300);

					e_mc_choices = index;
				}

				if (answer.image) {
					showImage(`#e_mc_choice_image_container_${index}`, `#e_mc_choice_input_image_file_${index}`, answer.image);
				}
			});

			$('#editMultipleChoiceModal').modal('show');
		}

		function editMultipleChoiceHidden() {
			loadQuestions();
			e_mc_choices = 0;
			clearValidationMessages(0);
		}

		function gatherMultipleChoiceData() {
			multipleChoiceData.quizId = parseInt("@Model.QuizVM.Id");
			multipleChoiceData.description = $('#mc_question').val();
			multipleChoiceData.questionType = 0;
			multipleChoiceData.points = parseInt($('#mc_input_points').val());
			multipleChoiceData.order = 0;
			multipleChoiceData.image = null;
			multipleChoiceData.answers = [];
			multipleChoiceData.items = [];
			multipleChoiceData.active = true;

			if ($('#mc_question_image_container img').attr('src') != null) {
				var base64Image = $('#mc_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				multipleChoiceData.image = base64Data;
			}

			$('.choice-container').each(function (index) {
				var choiceText = $(this).find('input[type="text"]').val();
				var tempImage = $(this).find('img').attr('src') || '';
				var choiceImage = null;
				var isCorrect = $(this).find('input[type="radio"]').is(':checked');
				var indexOrder = (index + 1).toString();

				if (tempImage) {
					var base64Image = tempImage;
					var base64Data = base64Image.split(',')[1];

					choiceImage = base64Data;
				}

				if (choiceText.trim() !== '') {
					multipleChoiceData.answers.push({
						answer: choiceText,
						image: choiceImage,
						isCorrect: isCorrect,
						showAnswer: true,
						order: indexOrder,
						active: true
					});
				}
			});
		}

		function checkMultipleChoice() {
			event.preventDefault();
			gatherMultipleChoiceData();
			clearValidationMessages(0);

			var points = multipleChoiceData.points;
			var question = multipleChoiceData.description;
			var choices = multipleChoiceData.answers;

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#mc_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#mc_question', 'Please enter a question.');
				valid = false;
			}

			$('#mc_choices_container .choice-container').each(function (index) {
				const choiceInput = $(this).find('input[type="text"]');
				const choiceText = choiceInput.val().trim();

				if (choiceText === '') {
					showError(choiceInput, 'Choice cannot be empty.');
					choiceInput.addClass('is-invalid');
					valid = false;
				} else {
					choiceInput.removeClass('is-invalid');
				}
			});

			if (valid) submitQuestion(multipleChoiceData, 0);
		}

		function checkAnotherChoiceInput(inputElement) {
			if ($(inputElement).val().trim() === '') {
				$(inputElement).closest('.choice-container').slideUp(300, function () {
					$(this).remove();

					if ($('.form-check-input:checked').length === 0) {
						$('#mc_choice_radio_1').prop('checked', true);
					}
				});
			}
		}

		function addMoreMultipleChoice() {
			mc_choices++;

			var choice = `
							<div class="col-12 mb-2 choice-container" id="choice_container_${mc_choices}" style="display: none;">
								<div class="row">
									<div class="col-sm-12 col-md-10 mb-2">
										<div class="form-check d-flex align-items-center gap-3">
											<input class="form-check-input" type="radio" name="mc_choice_radio" id="mc_choice_radio_${mc_choices}" style="transform: scale(1.2);">
											<div class="form-floating w-100">
												<input type="text" class="form-control" id="mc_choice_${mc_choices}" placeholder="Choice #${mc_choices}" maxlength="100" value="Another Choice" onchange="checkAnotherChoiceInput(this)">
												<label for="mc_choice_${mc_choices}">Another Choice</label>
											</div>
										</div>
									</div>
									<div class="col-sm-12 col-md-2 ps-md-0 mb-2">
										<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
											style="border: #dee2e6; border-style: dashed; cursor: pointer;"
											onclick="uploadImage('#mc_choice_image_container_${mc_choices}', '#mc_choice_input_image_file_${mc_choices}')">
											<div id="mc_choice_image_container_${mc_choices}" class="custom-image-container rounded" style="height: 55px;">
												<i class="bi bi-card-image fs-3 text-secondary"></i>
											</div>
										</div>
										<input type="file" id="mc_choice_input_image_file_${mc_choices}" accept="image/*" style="display: none;" />
									</div>
								</div>
							</div>
						`;

			$('#addMoreButtonContainer').before(choice);
			$(`#choice_container_${mc_choices}`).slideDown(300);
		}

		function multipleChoiceHidden() {
			$('#mc_question').val('');
			mc_choices = 0;
			mc_container.empty();
			$('#mc_input_points').val(1);
			removeImage('#mc_question_image_container', '#mc_input_image_file', event);
			clearValidationMessages(0);
			multipleChoiceData = {
				quizId: 0,
				description: '',
				order: '',
				questionType: 0,
				points: 0,
				image: '',
				answers: [],
				items: [],
				active: false
			};
		}

		function multipleChoiceShown() {
			$('#mc_input_points').val(1);
			mc_container.empty();

			while (mc_choices < mc_minimum_choices) {
				mc_choices++;

				var isChecked = mc_choices === 1 ? 'checked' : '';

				var choice = `
							<div class="col-12 mb-2 choice-container" id="choice_container_${mc_choices}" style="display: none;">
								<div class="row">
									<div class="col-sm-12 col-md-10 mb-2">
										<div class="form-check d-flex align-items-center gap-3">
											<input class="form-check-input" type="radio" name="mc_choice_radio" id="mc_choice_radio_${mc_choices}" style="transform: scale(1.2);" ${isChecked}>
											<div class="form-floating w-100">
												<input type="text" class="form-control" id="mc_choice_${mc_choices}" placeholder="Choice #${mc_choices}" maxlength="100">
												<label for="mc_choice_${mc_choices}">Choice #${mc_choices}</label>
											</div>
										</div>
									</div>
									<div class="col-sm-12 col-md-2 ps-md-0 mb-2">
										<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
											style="border: #dee2e6; border-style: dashed; cursor: pointer;"
											onclick="uploadImage('#mc_choice_image_container_${mc_choices}', '#mc_choice_input_image_file_${mc_choices}')">
											<div id="mc_choice_image_container_${mc_choices}" class="custom-image-container rounded" style="height: 55px;">
												<i class="bi bi-card-image fs-3 text-secondary"></i>
											</div>
										</div>
										<input type="file" id="mc_choice_input_image_file_${mc_choices}" accept="image/*" style="display: none;" />
									</div>
								</div>
							</div>
						`;

				mc_container.append(choice);
				$(`#choice_container_${mc_choices}`).slideDown(300);
			}

			var addMoreButton = `
							<div class="col-12 mt-2 mb-2 text-end" id="addMoreButtonContainer">
								<button class="btn btn-outline-secondary" type="button" onclick="addMoreMultipleChoice()">Add Another Choice</button>
							</div>
						`;

			mc_container.append(addMoreButton);
		}
	</script>

	<!-- True Or False Script -->
	<script>
		var trueOrFalseData = {
			quizId: 0,
			points: 0,
			description: '',
			order: '',
			questionType: 0,
			image: '',
			answers: [],
			items: [],
			active: false
		};

		var e_trueOrFalseData = {
			id: 0,
			description: '',
			order: 0,
			questionType: 0,
			points: 0,
			image: '',
			answers: [],
			items: [],
			active: false
		};

		function gatherEditedTrueOrFalseData() {
			var isTrue = $('#e_tf_radio_true').is(':checked');
			var answer = isTrue ? 'True' : 'False';

			e_trueOrFalseData.id = parseInt($('#e_tf_id').val());
			e_trueOrFalseData.description = $('#e_tf_question').val();
			e_trueOrFalseData.questionType = 1;
			e_trueOrFalseData.order = parseInt($('#e_tf_order').val());
			e_trueOrFalseData.points = parseInt($('#e_tf_input_points').val());
			e_trueOrFalseData.image = null;
			e_trueOrFalseData.active = true;
			e_trueOrFalseData.answers = [];
			e_trueOrFalseData.items = [];

			if ($('#e_tf_question_image_container img').attr('src') != null) {
				var base64Image = $('#e_tf_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				e_trueOrFalseData.image = base64Data;
			}

			e_trueOrFalseData.answers.push({
				id: parseInt($('#e_tf_a_id').val()),
				answer: answer,
				isCorrect: true,
				showAnswer: true,
				order: null,
				image: null,
				active: true
			});
		}

		function checkEditedTrueOrFalse() {
			event.preventDefault();
			gatherEditedTrueOrFalseData();
			clearValidationMessages(1);

			var points = e_trueOrFalseData.points;
			var question = e_trueOrFalseData.description;

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#e_tf_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#e_tf_question', 'Please enter a question.');
				valid = false;
			}

			if (valid) updateQuestion(e_trueOrFalseData, 1);
		}

		function editTrueOrFalse(data) {
			$('#e_tf_input_points').val(data.points);
			$('#e_tf_question').val(data.description);
			$('#e_tf_id').val(data.id);
			$('#e_tf_order').val(data.order);

			var deleteButtonContainer = $('#e_tf_deleteButtonContainer');

			deleteButtonContainer.empty();

			var deleteButton = `<button type="button" class="btn btn-danger text-start" onclick="removeQuestion(${data.id}, ${data.questionType});;">Delete</button>`

			deleteButtonContainer.append(deleteButton);

			if (data.image != '') {
				showImage('#e_tf_question_image_container', '#e_tf_input_image_file', data.image);
			} else {
				removeImage('#e_tf_question_image_container', '#e_tf_input_image_file', event);
			}

			$.each(data.answers, function (index, answer) {
				$('#e_tf_a_id').val(answer.id);
				$('#e_tf_a_order').val(answer.order);

				if (answer.answer === 'True') {
					$('#e_tf_radio_true').prop('checked', true);
				} else {
					$('#e_tf_radio_false').prop('checked', true);
				}
			});

			$('#editTrueOrFalseModal').modal('show');
		}

		function editTrueOrFalseHidden() {
			loadQuestions();
			clearValidationMessages(1);
		}

		function gatherTrueOrFalseData() {
			var isTrue = $('#tf_radio_true').is(':checked');
			var answer = isTrue ? 'True' : 'False';

			trueOrFalseData.quizId = parseInt("@Model.QuizVM.Id");
			trueOrFalseData.description = $('#tf_question').val();
			trueOrFalseData.questionType = 1;
			trueOrFalseData.points = parseInt($('#tf_input_points').val());
			trueOrFalseData.order = 0;
			trueOrFalseData.image = null;
			trueOrFalseData.answers = [];
			trueOrFalseData.items = [];
			trueOrFalseData.active = true;

			if ($('#tf_question_image_container img').attr('src')) {
				var base64Image = $('#tf_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				trueOrFalseData.image = base64Data;
			}

			trueOrFalseData.answers.push({
				answer: answer,
				isCorrect: true,
				showAnswer: true,
				order: null,
				image: null,
				active: true
			});
		}

		function checkTrueOrFalse() {
			event.preventDefault();
			gatherTrueOrFalseData();
			clearValidationMessages(1);

			var points = trueOrFalseData.points;
			var question = trueOrFalseData.description;

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#tf_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#tf_question', 'Please enter a question.');
				valid = false;
			}

			if (valid) submitQuestion(trueOrFalseData, 1);
		}

		function toggleRadio(radioId) {
			$('#' + radioId).prop('checked', true);
		}

		function trueOrFalseHidden() {
			$('#tf_radio_true').prop('checked', true);
			$('#tf_question').val('');
			$('#tf_input_points').val(1);
			removeImage('#tf_question_image_container', '#tf_input_image_file', event);
			clearValidationMessages(1);
			trueOrFalseData = {
				quizId: 0,
				points: 0,
				description: '',
				order: '',
				questionType: 0,
				image: '',
				answers: [],
				items: [],
				active: false
			};
		}

		function trueOrFalseShown() {
			$('#tf_radio_true').prop('checked', true);
			$('#tf_input_points').val(1);
		}
	</script>

	<!-- Matching Script -->
	<script>
		var m_itemList = [];
		var e_m_itemList = [];
		var m_container = $('#m_itemListContainer');
		var e_m_container = $('#e_m_itemListContainer');
		var m_prompts = 0;
		var e_m_prompts = 0;
		var m_minimum_prompts = 2;
		var e_m_minimum_prompts = 2;
		var m_orderedListContainer = $('<ol class="custom-ordered-list d-flex flex-wrap m-2 p-0" id="m_orderedListContainer"></ol>');
		var e_m_orderedListContainer = $('<ol class="custom-ordered-list d-flex flex-wrap m-2 p-0" id="e_m_orderedListContainer"></ol>');
		var m_promptContainer = $('#m_prompt_container');
		var e_m_promptContainer = $('#e_m_prompt_container');
		var m_addPromptButtonContainer = $('#m_add_prompt_button_container');
		var e_m_addPromptButtonContainer = $('#e_m_add_prompt_button_container');
		var m_item = $('#m_item_input');
		var e_m_item = $('#e_m_item_input');
		var m_matchingData = {
			quizId: 0,
			description: '',
			order: '',
			questionTyp: 0,
			points: 0,
			image: '',
			items: [],
			answers: [],
			active: false
		};

		var e_m_matchingData = {
			id: 0,
			description: '',
			order: '',
			questionTyp: 0,
			points: 0,
			image: '',
			items: [],
			answers: [],
			active: false
		};

		function gatherEditedMatchingData() {
			var listMarker;

			e_m_matchingData.id = parseInt($('#e_m_id').val());
			e_m_matchingData.questionType = 2;
			e_m_matchingData.description = $('#e_m_instruction').val();
			e_m_matchingData.points = parseInt($('#e_m_input_points').val());
			e_m_matchingData.order = parseInt($('#e_m_order').val());
			e_m_matchingData.image = null;
			e_m_matchingData.items = [];
			e_m_matchingData.answers = [];
			e_m_matchingData.active = true;

			if ($('#e_m_instruction_image_container img').attr('src') != null) {
				var base64Image = $('#e_m_instruction_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				e_m_matchingData.image = base64Data;
			}

			$('#e_m_orderedListContainer').find('li').each(function (index) {
				var itemText = $(this).find('strong').text();
				listMarker = String.fromCharCode(65 + index);
				
				var answerId = $(this).find('input.e-m-i-id').val();
				var hasId = answerId != '' ? answerId : 0;

				e_m_matchingData.items.push({
					id: parseInt(hasId),
					name: itemText,
					order: listMarker,
					quizQuestionId: parseInt($('#e_m_id').val()),
					active: true
				});
			});

			$('.e-m-prompt-container').each(function () {
				var selectedItem = $(this).find('.e-m-prompt-item-select-list').val();
				var inputText = $(this).find('input[type="text"]').val();
				var tempImage = $(this).find('.custom-image-container img').attr('src')
				var imageSrc = null;

				var answerId = $(this).find('input.e-m-a-id').val();
				var hasId = answerId != '' ? answerId : 0;

				if (tempImage != null) {
					var base64Image = tempImage;
					var base64Data = base64Image.split(',')[1];

					imageSrc = base64Data;
				}

				e_m_matchingData.answers.push({
					id: parseInt(hasId),
					answer: inputText,
					order: selectedItem,
					image: imageSrc,
					isCorrect: true,
					showAnswer: true,
					active: true
				});
			});
		}

		function checkEditedMatching() {
			event.preventDefault();
			gatherEditedMatchingData();
			clearValidationMessages(2);

			var points = e_m_matchingData.points;
			var instruction = e_m_matchingData.description;

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#e_m_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(instruction)) {
				showError('#e_m_instruction', 'Please enter an instruction.');
				valid = false;
			}

			if (e_m_matchingData.items.length < 2) {
				$('#alertText').text('Please enter at least two items.');
				$('#alertModal').modal('show');
				valid = false;
			} else if (e_m_matchingData.answers.length === 0) {
				$('#alertText').text('Please enter at least one prompt.');
				$('#alertModal').modal('show');
				valid = false;
			}

			if (valid) updateQuestion(e_m_matchingData, 2);
		}

		function e_m_appendItemMarker() {
			e_m_orderedListContainer.empty();
			var marker;

			if (e_m_matchingData.items.length !== 0) {
				$.each(e_m_matchingData.items, function (index, item) {
					index + 1;
					marker = String.fromCharCode(65 + index);

					var list = `
						<li class="m-1" id="e_m_item_li_${index}" style="display: none;">
							<input type="hidden" class="e-m-i-id" value="${item.id}" />
							<span class="capsule d-flex align-items-center justify-content-center border border-2 border-secondary-subtle rounded-5 p-1 ps-2 pe-2">
								${marker}.<strong class="ms-1">${item.name}</strong>
								<i class="ms-2 bi bi-x-lg" style="cursor: pointer;" onclick="e_m_removeItem(${index})"></i>
							</span>
						</li>
					`;

					e_m_orderedListContainer.append(list);

					setTimeout(function() {
						$(`#e_m_item_li_${index}`).fadeIn(200);
					}, 10);
				});
			}
		}

		function e_m_appendItemsOnPrompt() {
			var selectList = $('.e-m-prompt-item-select-list');

			selectList.empty();

			if (e_m_matchingData.items.length !== 0) {
				$.each(e_m_matchingData.items, function (index, value) {
					var marker;
					var list;

					marker = String.fromCharCode(65 + index);
					list = `<option value="${marker}">${marker}</option>`;

					selectList.append(list);
				});
			}
		}

		function e_m_emptyPromptContainer() {
			e_m_promptContainer.slideUp(300, function () {
				$(this).empty().fadeIn();
				e_m_addPromptButtonContainer.empty();
			});
		}

		function e_m_showEmptyList() {
			e_m_addPromptButtonContainer.empty();
			e_m_container.empty();

			var emptyList = `
							<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="e_m_emptyItemList" style="display: none;">
								<i class="bi bi-list-ol fs-1 text-secondary"></i>
								<span class="fs-3 text-secondary">Empty List</span>
							</div>
						`;

			e_m_container.append(emptyList);
			$('#e_m_emptyItemList').slideDown(300);
		}

		function e_m_checkPrompt() {
			if (e_m_matchingData.items.length == 0) {
				e_m_showEmptyList();
			}

			if (e_m_matchingData.items.length < 2) {
				e_m_emptyPromptContainer();
			}
		}

		function e_m_removeItem(index) {
			if (index >= 0 && index < e_m_matchingData.items.length) {
				e_m_matchingData.items.splice(index, 1);
			}

			e_m_appendItemsOnPrompt();
			e_m_appendItemMarker();
			e_m_checkPrompt();
		}

		function e_m_addItem() {
			if (e_m_item.val() != '') {
				var listTitle = '<h4>Items</h4>';

				var lastItem = e_m_matchingData.items.length;

				var listMarker = String.fromCharCode(65 + lastItem);

				e_m_matchingData.items.push({
					id: 0,
					name: e_m_item.val(),
					order: listMarker,
					quizQuestionId: parseInt($('#e_m_id').val()),
					active: true
				});

				e_m_container.empty();
				e_m_container.append(listTitle);

				e_m_appendItemMarker();

				e_m_container.append(e_m_orderedListContainer);
				e_m_item.val('');
			}

			e_m_checkItemInput();
			e_m_checkItemList();
			e_m_changeListType();
		}

		function e_m_changeListType() {
			if (e_m_orderedListContainer.length !== 0) {
				e_m_appendItemMarker();
				e_m_appendItemsOnPrompt();
			}
		}

		function e_m_showEmptyPrompt() {
			var emptyPrompt = `
							<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="e_m_emptyPrompt" style="display: none;">
								<i class="bi bi-border-width fs-1 text-secondary"></i>
								<span class="fs-3 text-secondary">Empty Prompt</span>
							</div>
						`;

			e_m_promptContainer.append(emptyPrompt);
			$('#e_m_emptyPrompt').slideDown(200);
		}

		function e_m_checkPromptValue(inputElement) {
			if ($(inputElement).val().trim() === '') {
				$(inputElement).closest('.e-m-prompt-container').slideUp(300, function () {
					$(this).remove();

					if ($('.e-m-prompt-container').length === 0) {
						e_m_showEmptyPrompt();
					}
				});
			}
		}

		function e_m_addPrompt() {
			$('#e_m_emptyPrompt').remove();

			e_m_prompts++;

			var promptItem = `
						<div class="col-sm-12 col-md-12 mb-4 mb-md-2 e-m-prompt-container" id="e_m_prompt_container_${e_m_prompts}" style="display: none;">
							<input type="hidden" class="e-m-a-id" />
							<div class="row">
								<div class="col-3 col-md-3">
									<select class="form-select form-select-lg e-m-prompt-item-select-list" aria-label="Items" style="height: 55px;">
									</select>
								</div>
								<div class="col-9 col-md-6">
									<div class="form-floating w-100">
										<input type="text" class="form-control" id="e_m_prompt_${e_m_prompts}" placeholder="Prompt" maxlength="100" value="Prompt" onchange="e_m_checkPromptValue(this)">
										<label for="e_m_prompt_${e_m_prompts}">Prompt</label>
									</div>
								</div>
								<div class="col-sm-12 col-md-3 mt-2 mt-md-0">
									<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
										style="border: #dee2e6; border-style: dashed; cursor: pointer;"
										onclick="uploadImage('#e_m_prompt_image_container_${e_m_prompts}', '#e_m_prompt_input_image_file_${e_m_prompts}')">
										<div id="e_m_prompt_image_container_${e_m_prompts}" class="custom-image-container rounded" style="height: 55px;">
											<i class="bi bi-card-image fs-3 text-secondary"></i>
										</div>
									</div>
									<input type="file" id="e_m_prompt_input_image_file_${e_m_prompts}" accept="image/*" style="display: none;" />
								</div>
							</div>
						</div>
					`;

			e_m_promptContainer.append(promptItem);
			$(`#e_m_prompt_container_${e_m_prompts}`).slideDown(300);

			e_m_appendItemsOnPrompt();
		}

		function e_m_checkItemList() {
			if (e_m_matchingData.items.length == 2) {
				var headerTitle = '<h4>Prompts</h4>'
				e_m_promptContainer.append(headerTitle);

				e_m_addPromptButtonContainer.empty();

				e_m_addPrompt();

				var addMorePromptButton = `
							<div class="col-12 mt-2 mb-2 text-end" id="e_addMorePromptButtonContainer">
								<button class="btn btn-outline-secondary" type="button" onclick="e_m_addPrompt()">Add Prompt</button>
							</div>
						`;

				e_m_addPromptButtonContainer.append(addMorePromptButton);
			}
		}

		function e_m_checkItemInput() {
			var trimmedItem = e_m_item.val().trim();

			if (trimmedItem === '') {
				$('#e_m_addItemButton').prop('disabled', true);
			} else {
				$('#e_m_addItemButton').prop('disabled', false);
			}
		}

		function editMatching(data) {
			e_m_checkItemInput();
			e_m_matchingData = data;

			var e_m_selectList = $('.e-m-prompt-item-select-list');
			$('#e_m_input_points').val(data.points);
			$('#e_m_instruction').val(data.description);
			$('#e_m_id').val(data.id);
			$('#e_m_order').val(data.order);

			var deleteButtonContainer = $('#e_m_deleteButtonContainer');

			deleteButtonContainer.empty();

			var deleteButton = `<button type="button" class="btn btn-danger text-start" onclick="removeQuestion(${data.id}, ${data.questionType});;">Delete</button>`

			deleteButtonContainer.append(deleteButton);

			if (data.image != '') {
				showImage('#e_m_instruction_image_container', '#e_m_input_image_file', data.image);
			} else {
				removeImage('#e_m_instruction_image_container', '#e_m_input_image_file', event);
			}

			e_m_selectList.empty();
			e_m_promptContainer.empty();
			e_m_container.empty();

			if (data.items.length >= 2) {
				var listTitle = '<h4>Items</h4>';

				e_m_container.append(listTitle);

				if (/^[A-Z]$/.test(data.items[0].order)) {
					$('#e_m_list_type').val('upper-alpha').change();
				} else {
					$('#e_m_list_type').val('decimal').change();
				}

				e_m_orderedListContainer.empty();

				$.each(data.items, function (index, item) {
					var list = `
							<li class="m-1 e-item-container" id="e_m_item_li_${index}" style="display: none;">
								<input type="hidden" class="e-m-i-id" value="${item.id}" />
								<span class="capsule d-flex align-items-center justify-content-center border border-2 border-secondary-subtle rounded-5 p-1 ps-2 pe-2">
									${item.order}.<strong class="ms-1">${item.name}</strong>
									<i class="ms-2 bi bi-x-lg" style="cursor: pointer;" onclick="e_m_removeItem(${index})"></i>
								</span>
							</li>
							`;

					e_m_orderedListContainer.append(list);
				});

				e_m_orderedListContainer.find('li').fadeIn(200);
				e_m_container.append(e_m_orderedListContainer);
			}

			if (data.answers.length != 0) {
				e_m_addPromptButtonContainer.empty();

				var headerTitle = '<h4>Prompts</h4>';

				e_m_promptContainer.append(headerTitle);

				$.each(data.answers, function (index, answer) {
					e_m_prompts++;

					var promptItem = `
								<div class="col-sm-12 col-md-12 mb-4 mb-md-2 e-m-prompt-container" id="e_m_prompt_container_${e_m_prompts}" style="display: none;">
									<input type="hidden" class="e-m-a-id" value="${answer.id}" />
									<input type="hidden" class="e-m-a-order" value="${answer.order}" />
									<div class="row">
										<div class="col-3 col-md-3">
											<select class="form-select form-select-lg e-m-prompt-item-select-list" name="promptItemSelect" id="e_m_select_list_${e_m_prompts}" aria-label="Items" style="height: 55px;">
											</select>
										</div>
										<div class="col-9 col-md-6">
											<div class="form-floating w-100">
												<input type="text" class="form-control" id="e_m_prompt_${e_m_prompts}" placeholder="Prompt" maxlength="100" value="${answer.answer}" onchange="e_m_checkPromptValue(this)">
												<label for="e_m_prompt_${e_m_prompts}">Prompt</label>
											</div>
										</div>
										<div class="col-sm-12 col-md-3 mt-2 mt-md-0">
											<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
													style="border: #dee2e6; border-style: dashed; cursor: pointer;"
													onclick="uploadImage('#e_m_prompt_image_container_${e_m_prompts}', '#e_m_prompt_input_image_file_${e_m_prompts}')">
												<div id="e_m_prompt_image_container_${e_m_prompts}" class="custom-image-container rounded" style="height: 55px;">
													<i class="bi bi-card-image fs-3 text-secondary"></i>
												</div>
											</div>
											<input type="file" id="e_m_prompt_input_image_file_${e_m_prompts}" accept="image/*" style="display: none;" />
										</div>
									</div>
								</div>
							`;

					e_m_promptContainer.append(promptItem);
					$(`#e_m_prompt_container_${e_m_prompts}`).slideDown(300);

					$.each(data.items, function (itemIndex, item) {
						var isSelected = item.order == answer.order ? "selected" : "";
						var list = `<option value="${item.order}" ${isSelected}>${item.order}</option>`;
						$(`#e_m_select_list_${e_m_prompts}`).append(list);
					});

					if (answer.image) {
						showImage(`#e_m_prompt_image_container_${e_m_prompts}`, `#e_m_prompt_input_image_file_${e_m_prompts}`, answer.image);
					}
				});
			}

			var addMorePromptButton = `
							<div class="col-12 mt-2 mb-2 text-end" id="e_addMorePromptButtonContainer">
								<button class="btn btn-outline-secondary" type="button" onclick="e_m_addPrompt()">Add Prompt</button>
							</div>
						`;

			e_m_addPromptButtonContainer.append(addMorePromptButton);

			$('#editMatchingModal').modal('show');
		}

		function editMatchingHidden() {
			loadQuestions();
			clearValidationMessages(2);
			e_m_item.val('');
		}

		function gatherMatchingData() {
			var listMarker;

			m_matchingData.quizId = parseInt("@Model.QuizVM.Id");
			m_matchingData.questionType = 2;
			m_matchingData.description = $('#m_instruction').val();
			m_matchingData.points = parseInt($('#m_input_points').val());
			m_matchingData.order = 0;
			m_matchingData.image = null;
			m_matchingData.items = [];
			m_matchingData.answers = [];
			m_matchingData.active = true;

			if ($('#m_instruction_image_container img').attr('src') != null) {
				var base64Image = $('#m_instruction_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				m_matchingData.image = base64Data;
			}

			$('#m_orderedListContainer').find('li').each(function (index) {
				var itemText = $(this).find('strong').text();
				listMarker = String.fromCharCode(65 + index);

				m_matchingData.items.push({
					name: itemText,
					order: listMarker,
					active: true
				});
			});

			$('.m-prompt-container').each(function () {
				var selectedItem = $(this).find('.m-prompt-item-select-list').val();
				var inputText = $(this).find('input[type="text"]').val();
				var tempImage = $(this).find('.custom-image-container img').attr('src')
				var imageSrc = null;

				if (tempImage != null) {
					var base64Image = tempImage;
					var base64Data = base64Image.split(',')[1];

					imageSrc = base64Data;
				}

				m_matchingData.answers.push({
					answer: inputText,
					order: selectedItem,
					image: imageSrc,
					isCorrect: true,
					showAnswer: true,
					active: true
				});
			});
		}

		function checkMatching() {
			event.preventDefault();
			gatherMatchingData();
			clearValidationMessages(2);

			var points = m_matchingData.points;
			var instruction = m_matchingData.description;

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#m_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}
			
			if (!isValidQuestion(instruction)) {
				showError('#m_instruction', 'Please enter an instruction.');
				valid = false;
			}
			
			if (m_matchingData.items.length < 2) {
				$('#alertText').text('Please enter at least two items.');
				$('#alertModal').modal('show');
				valid = false;
			} else if (m_matchingData.answers.length === 0) {
				$('#alertText').text('Please enter at least one prompt.');
				$('#alertModal').modal('show');
				valid = false;
			}

			if (valid) submitQuestion(m_matchingData, 2);
		}

		function m_appendItemMarker() {
			m_orderedListContainer.empty();
			var marker;

			if (m_itemList.length !== 0) {
				$.each(m_itemList, function (index, value) {
					var adjustedIndex = index + 1;

					marker = String.fromCharCode(65 + index);

					var list = `
						<li class="m-1" id="m_item_li_${adjustedIndex}" style="display: none;">
							<span class="capsule d-flex align-items-center justify-content-center border border-2 border-secondary-subtle rounded-5 p-1 ps-2 pe-2">
								${marker}.<strong class="ms-1">${value}</strong>
								<i class="ms-2 bi bi-x-lg" style="cursor: pointer;" onclick="m_removeItem(${adjustedIndex})"></i>
							</span>
						</li>
					`;

					m_orderedListContainer.append(list);

					setTimeout(function() {
						$(`#m_item_li_${adjustedIndex}`).fadeIn(200);
					}, 10);
				});
			}
		}

		function m_appendItemsOnPrompt() {
			var selectList = $('.m-prompt-item-select-list');

			selectList.empty();

			if (m_itemList.length !== 0) {
				$.each(m_itemList, function (index, value) {
					var marker;
					var list;

					marker = String.fromCharCode(65 + index);
					list = `<option value="${marker}">${marker}</option>`;

					selectList.append(list);
				});
			}
		}

		function m_emptyPromptContainer() {
			m_promptContainer.slideUp(300, function () {
				$(this).empty().fadeIn();
				m_addPromptButtonContainer.empty();
			});
		}

		function m_showEmptyList() {
			m_addPromptButtonContainer.empty();
			m_container.empty();

			var emptyList = `
							<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="m_emptyItemList" style="display: none;">
								<i class="bi bi-list-ol fs-1 text-secondary"></i>
								<span class="fs-3 text-secondary">Empty List</span>
							</div>
						`;

			m_container.append(emptyList);
			$('#m_emptyItemList').slideDown(300);
		}

		function m_checkPrompt() {
			if (m_itemList.length == 0) {
				m_showEmptyList();
			}

			if (m_itemList.length < 2) {
				m_emptyPromptContainer();
			}
		}

		function m_removeItem(index) {
			var zeroBasedIndex = index - 1;

			if (zeroBasedIndex >= 0 && zeroBasedIndex < m_itemList.length) {
				m_itemList.splice(zeroBasedIndex, 1);
			}

			m_appendItemsOnPrompt();
			m_appendItemMarker();
			m_checkPrompt();
		}

		function m_addItem() {
			if (m_item.val() != '') {
				var listTitle = '<h4>Items</h4>';

				m_itemList.push(m_item.val());

				m_container.empty();
				m_container.append(listTitle);

				m_appendItemMarker();

				m_container.append(m_orderedListContainer);
				m_item.val('');
			}

			m_checkItemInput();
			m_checkItemList();
			m_changeListType();
		}

		function m_changeListType() {
			if (m_orderedListContainer.length !== 0) {
				m_appendItemMarker();
				m_appendItemsOnPrompt();
			}
		}

		function m_showEmptyPrompt() {
			var emptyPrompt = `
							<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="m_emptyPrompt" style="display: none;">
								<i class="bi bi-border-width fs-1 text-secondary"></i>
								<span class="fs-3 text-secondary">Empty Prompt</span>
							</div>
						`;

			m_promptContainer.append(emptyPrompt);
			$('#m_emptyPrompt').slideDown(200);
		}

		function m_checkPromptValue(inputElement) {
			if ($(inputElement).val().trim() === '') {
				$(inputElement).closest('.m-prompt-container').slideUp(300, function () {
					$(this).remove();

					if ($('.m-prompt-container').length === 0) {
						m_showEmptyPrompt();
					}
				});
			}
		}

		function m_addPrompt() {
			$('#m_emptyPrompt').remove();

			m_prompts++;

			var promptItem = `
						<div class="col-sm-12 col-md-12 mb-4 mb-md-2 m-prompt-container" id="m_prompt_container_${m_prompts}" style="display: none;">
							<div class="row">
								<div class="col-3 col-md-3">
									<select class="form-select form-select-lg m-prompt-item-select-list" aria-label="Items" style="height: 55px;">
									</select>
								</div>
								<div class="col-9 col-md-6">
									<div class="form-floating w-100">
										<input type="text" class="form-control" id="m_prompt_${m_prompts}" placeholder="Prompt" maxlength="100" value="Prompt" onchange="m_checkPromptValue(this)">
										<label for="m_prompt_${m_prompts}">Prompt</label>
									</div>
								</div>
								<div class="col-sm-12 col-md-3 mt-2 mt-md-0">
									<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
										style="border: #dee2e6; border-style: dashed; cursor: pointer;"
										onclick="uploadImage('#m_prompt_image_container_${m_prompts}', '#m_prompt_input_image_file_${m_prompts}')">
										<div id="m_prompt_image_container_${m_prompts}" class="custom-image-container rounded" style="height: 55px;">
											<i class="bi bi-card-image fs-3 text-secondary"></i>
										</div>
									</div>
									<input type="file" id="m_prompt_input_image_file_${m_prompts}" accept="image/*" style="display: none;" />
								</div>
							</div>
						</div>
					`;

			m_promptContainer.append(promptItem);
			$(`#m_prompt_container_${m_prompts}`).slideDown(300);

			m_appendItemsOnPrompt();
		}

		function m_checkItemList() {
			if (m_itemList.length == 2) {
				var headerTitle = '<h4>Prompts</h4>'
				m_promptContainer.append(headerTitle);

				m_addPromptButtonContainer.empty();

				m_addPrompt();

				var addMorePromptButton = `
							<div class="col-12 mt-2 mb-2 text-end" id="addMorePromptButtonContainer">
								<button class="btn btn-outline-secondary" type="button" onclick="m_addPrompt()">Add Prompt</button>
							</div>
						`;

				m_addPromptButtonContainer.append(addMorePromptButton);
			}
		}

		function m_checkItemInput() {
			var trimmedItem = m_item.val().trim();

			if (trimmedItem === '') {
				$('#m_addItemButton').prop('disabled', true);
			} else {
				$('#m_addItemButton').prop('disabled', false);
			}
		}

		function matchingHidden() {
			$('#m_instruction').val('');
			$('#m_input_points').val(1);
			removeImage('#m_instruction_image_container', '#m_input_image_file', event);
			m_showEmptyList();
			m_promptContainer.empty();
			m_itemList.length = 0;
			m_item.val('');
			m_prompts = 0;
			matchingData = {
				quizId: 0,
				description: '',
				order: '',
				questionType: 0,
				points: 0,
				image: '',
				items: [],
				answers: [],
				active: false
			};
			clearValidationMessages(2);
		}

		function matchingShown() {
			$('#m_instruction').val('');
			$('#m_input_answer').val('');
			$('#m_input_points').val(1);
		}

		m_checkItemInput();
	</script>

	<!-- Sequence Script -->
	<script>
		var s_itemList = [];
		var e_s_itemList = [];
		var s_container = $('#s_itemListContainer');
		var e_s_container = $('#e_s_itemListContainer');
		var s_prompts = 0;
		var e_s_prompts = 0;
		var s_minimum_prompts = 2;
		var s_orderedListContainer = $('<ol class="custom-ordered-list d-flex flex-wrap m-2 p-0" id="s_orderedListContainer"></ol>');
		var e_s_orderedListContainer = $('<ol class="e-custom-ordered-list d-flex flex-wrap m-2 p-0" id="e_s_orderedListContainer"></ol>');
		var s_promptContainer = $('#s_prompt_container');
		var e_s_promptContainer = $('#e_s_prompt_container');
		var s_item = $('#s_item_input');
		var e_s_item = $('#e_s_item_input');
		var s_sequencingData = {
			quizId: 0,
			description: '',
			order: '',
			questionTyp: 0,
			points: 0,
			image: '',
			items: [],
			answers: [],
			active: false
		};

		var e_s_sequencingData = {
			id: 0,
			description: '',
			order: '',
			questionTyp: 0,
			points: 0,
			image: '',
			items: [],
			answers: [],
			active: false
		};

		function gatherEditedSequencingData() {
			e_s_sequencingData.id = parseInt($('#e_s_id').val());
			e_s_sequencingData.questionType = 3;
			e_s_sequencingData.description = $('#e_s_instruction').val();
			e_s_sequencingData.points = parseInt($('#e_s_input_points').val());
			e_s_sequencingData.order = parseInt($('#e_s_order').val());
			e_s_sequencingData.image = null;
			e_s_sequencingData.items = [];
			e_s_sequencingData.answers = [];
			e_s_sequencingData.active = true;

			if ($('#e_s_instruction_image_container img').attr('src') != null) {
				var base64Image = $('#e_s_instruction_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				e_s_sequencingData.image = base64Data;
			}

			$('#e_s_orderedListContainer').find('li').each(function (index) {
				var itemText = $(this).find('strong').text();
				index + 1;

				e_s_sequencingData.items.push({
					name: itemText,
					order: index,
					active: true
				});
			});

			$('.e-s-prompt-container').each(function () {
				var selectedItem = $(this).find('.e-s-prompt-item-select-list').val();
				var inputText = $(this).find('input[type="text"]').val();
				var tempImage = $(this).find('.custom-image-container img').attr('src')
				var imageSrc = null;
				var answerId = $(this).find('input.e-s-a-id').val();
				var hasId = answerId != '' ? answerId : 0;

				if (tempImage != null) {
					var base64Image = tempImage;
					var base64Data = base64Image.split(',')[1];

					imageSrc = base64Data;
				}

				e_s_sequencingData.answers.push({
					id: parseInt(hasId),
					answer: inputText,
					order: selectedItem,
					image: imageSrc,
					isCorrect: true,
					showAnswer: true,
					active: true
				});
			});
		}

		function checkEditedSequencing() {
			event.preventDefault();
			gatherEditedSequencingData();
			clearValidationMessages(3);

			var points = e_s_sequencingData.points;
			var instruction = e_s_sequencingData.description;

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#e_s_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(instruction)) {
				showError('#e_s_instruction', 'Please enter an instruction.');
				valid = false;
			}

			if (e_s_sequencingData.answers.length !== 0) {
				var seenOrders = new Set();

				for (var i = 0; i < e_s_sequencingData.answers.length; i++) {
					var orderValue = e_s_sequencingData.answers[i].order;

					if (seenOrders.has(orderValue)) {
						$('#alertText').text('One of the orders is the same as another.');
						$('#alertModal').modal('show');
						valid = false;
						return;
					}

					seenOrders.add(orderValue);
				}
			}

			if (e_s_sequencingData.answers.length < 2) {
				$('#alertText').text('Please enter at least 2 or more prompt.');
				$('#alertModal').modal('show');
				valid = false;
			}

			if (valid) updateQuestion(e_s_sequencingData, 3);
		}

		function editSequencing(data) {
			$('#e_s_input_points').val(data.points);
			$('#e_s_instruction').val(data.description);
			$('#e_s_id').val(data.id);
			$('#e_s_order').val(data.order);

			var deleteButtonContainer = $('#e_s_deleteButtonContainer');

			deleteButtonContainer.empty();

			var deleteButton = `<button type="button" class="btn btn-danger text-start" onclick="removeQuestion(${data.id}, ${data.questionType});;">Delete</button>`

			deleteButtonContainer.append(deleteButton);

			if (data.image != '') {
				showImage('#e_s_instruction_image_container', '#e_s_input_image_file', data.image);
			} else {
				removeImage('#e_s_instruction_image_container', '#e_s_input_image_file', event);
			}

			e_s_promptContainer.empty();

			var items = data.answers.length;

			for (var i = 1; i <= items; i++) {
				e_s_itemList.push(i);
			}

			$.each(data.answers, function (index, answer) {
				e_s_prompts++;

				var promptItem = `
					<div class="col-sm-12 col-md-12 mb-4 mb-md-2 e-s-prompt-container" id="e_s_prompt_container_${e_s_prompts}" style="display: none;">
						<input type="hidden" class="e-s-a-id" value="${answer.id}" />
						<div class="row">
							<div class="col-3 col-md-3">
								<select class="form-select form-select-lg e-s-prompt-item-select-list" id="e_s_select_list_${e_s_prompts}" aria-label="Items" style="height: 55px;">
								</select>
							</div>
							<div class="col-9 col-md-6">
								<div class="form-floating w-100">
									<input type="text" class="form-control" id="e_s_prompt_${e_s_prompts}" placeholder="Prompt" maxlength="100" value="${answer.answer}" onchange="e_s_checkPromptValue(this)">
									<label for="e_s_prompt_${e_s_prompts}">Prompt</label>
								</div>
							</div>
							<div class="col-sm-12 col-md-3 mt-2 mt-md-0">
								<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
									style="border: #dee2e6; border-style: dashed; cursor: pointer;"
									onclick="uploadImage('#e_s_prompt_image_container_${e_s_prompts}', '#e_s_prompt_input_image_file_${e_s_prompts}')">
									<div id="e_s_prompt_image_container_${e_s_prompts}" class="custom-image-container rounded" style="height: 55px;">
										<i class="bi bi-card-image fs-3 text-secondary"></i>
									</div>
								</div>
								<input type="file" id="e_s_prompt_input_image_file_${e_s_prompts}" accept="image/*" style="display: none;" />
							</div>
						</div>
					</div>
				`;

				e_s_promptContainer.append(promptItem);
				$(`#e_s_prompt_container_${e_s_prompts}`).slideDown(300);

				$.each(e_s_itemList, function (itemIndex, item) {
					var isSelected = item == answer.order ? "selected" : "";
					var list = `<option value="${item}" ${isSelected}>${item}</option>`;
					$(`#e_s_select_list_${e_s_prompts}`).append(list);
				});

				if (answer.image) {
					showImage(`#e_s_prompt_image_container_${e_s_prompts}`, `#e_s_prompt_input_image_file_${e_s_prompts}`, answer.image);
				}
			});

			$('#editSequencingModal').modal('show');
			e_s_checkItemInput();
		}

		function editSequencingHidden() {
			loadQuestions();
			clearValidationMessages(3);
			e_s_itemList = [];
		}

		function e_s_addItem() {
			if (e_s_item.val() != '') {
				var lastIndex = e_s_itemList[e_s_itemList.length - 1];

				e_s_itemList.push(lastIndex++);
			}

			e_s_checkItemInput();
			e_s_checkItemList();
			e_s_appendItemsOnPrompt();
			e_s_item.val('');
		}

		function e_s_appendItemsOnPrompt() {
			var selectList = $('.e-s-prompt-item-select-list');

			selectList.empty();

			if (e_s_itemList.length !== 0) {
				$.each(e_s_itemList, function (index, value) {
					var list;
					var itemValue = index + 1;

					list = `<option value="${itemValue}">${itemValue}</option>`;

					selectList.append(list);
				});
			}
		}

		function e_s_checkPromptValue(inputElement) {
			if ($(inputElement).val().trim() === '') {
				$(inputElement).closest('.e-s-prompt-container').slideUp(300, function () {
					$(this).remove();

					e_s_itemList.pop();
					e_s_appendItemsOnPrompt();

					if ($('.e-s-prompt-container').length === 0) {
						e_s_showEmptyPrompt();
					}
				});
			}
		}

		function e_s_addPrompt() {
			$('#e_s_emptyPrompt').remove();

			e_s_prompts++;

			var lastItem = e_s_itemList[e_s_itemList.length - 1];

			var promptValue = e_s_item.val();

			var promptItem = `
						<div class="col-sm-12 col-md-12 mb-4 mb-md-2 e-s-prompt-container" id="e_s_prompt_container_${e_s_prompts}" style="display: none;">
							<input type="hidden" class="e-s-a-id" value="0" />
							<div class="row">
								<div class="col-3 col-md-3">
									<select class="form-select form-select-lg e-s-prompt-item-select-list" aria-label="Items" style="height: 55px;">
									</select>
								</div>
								<div class="col-9 col-md-6">
									<div class="form-floating w-100">
										<input type="text" class="form-control" id="e_s_prompt_${e_s_prompts}" placeholder="Prompt" maxlength="100" value="${promptValue}" onchange="e_s_checkPromptValue(this)">
										<label for="e_s_prompt_${e_s_prompts}">Prompt</label>
									</div>
								</div>
								<div class="col-sm-12 col-md-3 mt-2 mt-md-0">
									<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
										style="border: #dee2e6; border-style: dashed; cursor: pointer;"
										onclick="uploadImage('#e_s_prompt_image_container_${e_s_prompts}', '#e_s_prompt_input_image_file_${e_s_prompts}')">
										<div id="e_s_prompt_image_container_${e_s_prompts}" class="custom-image-container rounded" style="height: 55px;">
											<i class="bi bi-card-image fs-3 text-secondary"></i>
										</div>
									</div>
									<input type="file" id="e_s_prompt_input_image_file_${e_s_prompts}" accept="image/*" style="display: none;" />
								</div>
							</div>
						</div>
					`;

			e_s_promptContainer.append(promptItem);
			$(`#e_s_prompt_container_${e_s_prompts}`).slideDown(300);

			e_s_appendItemsOnPrompt();
		}

		function e_s_checkItemList() {
			if (e_s_itemList.length >= 1) {
				if (e_s_itemList.length === 1) {
					e_s_promptContainer.empty();

					const headerTitle = '<h4>Prompts</h4>';
					e_s_promptContainer.append(headerTitle);
				}

				e_s_addPrompt();
			}
		}

		function e_s_checkItemInput() {
			var trimmedItem = e_s_item.val().trim();

			if (trimmedItem === '') {
				$('#e_s_addItemButton').prop('disabled', true);
			} else {
				$('#e_s_addItemButton').prop('disabled', false);
			}
		}

		function gatherSequencingData() {
			s_sequencingData.quizId = parseInt("@Model.QuizVM.Id");
			s_sequencingData.questionType = 3;
			s_sequencingData.description = $('#s_instruction').val();
			s_sequencingData.points = parseInt($('#s_input_points').val());
			s_sequencingData.order = 0;
			s_sequencingData.image = null;
			s_sequencingData.items = [];
			s_sequencingData.answers = [];
			s_sequencingData.active = true;

			if ($('#s_instruction_image_container img').attr('src') != null) {
				var base64Image = $('#s_instruction_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				s_sequencingData.image = base64Data;
			}

			$('#s_orderedListContainer').find('li').each(function (index) {
				var itemText = $(this).find('strong').text();
				index + 1;

				s_sequencingData.items.push({
					name: itemText,
					order: index,
					active: true
				});
			});

			$('.s-prompt-container').each(function () {
				var selectedItem = $(this).find('.s-prompt-item-select-list').val();
				var inputText = $(this).find('input[type="text"]').val();
				var tempImage = $(this).find('.custom-image-container img').attr('src')
				var imageSrc = null;

				if (tempImage != null) {
					var base64Image = tempImage;
					var base64Data = base64Image.split(',')[1];

					imageSrc = base64Data;
				}

				s_sequencingData.answers.push({
					answer: inputText,
					order: selectedItem,
					image: imageSrc,
					isCorrect: true,
					showAnswer: true,
					active: true
				});
			});
		}

		function checkSequencing() {
			event.preventDefault();
			gatherSequencingData();
			clearValidationMessages(3);

			var points = s_sequencingData.points;
			var instruction = s_sequencingData.description;

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#s_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(instruction)) {
				showError('#s_instruction', 'Please enter an instruction.');
				valid = false;
			}

			if (s_sequencingData.answers.length !== 0) {
				var seenOrders = new Set();

				for (var i = 0; i < s_sequencingData.answers.length; i++) {
					var orderValue = s_sequencingData.answers[i].order;

					if (seenOrders.has(orderValue)) {
						$('#alertText').text('One of the orders is the same as another.');
						$('#alertModal').modal('show');
						valid = false;
						return;
					}

					seenOrders.add(orderValue);
				}
			}

			if (s_sequencingData.answers.length < 2) {
				$('#alertText').text('Please enter at least 2 or more prompt.');
				$('#alertModal').modal('show');
				valid = false;
			}

			if (valid) submitQuestion(s_sequencingData, 3);
		}

		function s_appendItemsOnPrompt() {
			var selectList = $('.s-prompt-item-select-list');

			selectList.empty();

			if (s_itemList.length !== 0) {
				$.each(s_itemList, function (index, value) {
					var list;
					var itemValue = index + 1;

					list = `<option value="${itemValue}">${itemValue}</option>`;

					selectList.append(list);
				});
			}
		}

		function s_emptyPromptContainer() {
			s_promptContainer.slideUp(300, function () {
				$(this).empty().fadeIn();
			});
		}

		function s_showEmptyList() {
			s_container.empty();

			var emptyList = `
						<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="s_emptyItemList" style="display: none;">
							<i class="bi bi-list-ol fs-1 text-secondary"></i>
							<span class="fs-3 text-secondary">Empty List</span>
						</div>
					`;

			s_container.append(emptyList);
			$('#s_emptyItemList').slideDown(300);
		}

		function s_checkPrompt() {
			if (s_itemList.length == 0) {
				s_showEmptyList();
			}

			if (s_itemList.length < 2) {
				s_emptyPromptContainer();
			}
		}

		function s_addItem() {
			if (s_item.val() != '') {
				var lastIndex = s_itemList[s_itemList.length - 1];

				s_itemList.push(lastIndex++);
			}

			s_checkItemInput();
			s_checkItemList();
			s_appendItemsOnPrompt();
			s_item.val('');
		}

		function s_showEmptyPrompt() {
			var emptyPrompt = `
						<div class="d-flex flex-column align-items-center justify-content-center p-5 border rounded" id="s_emptyPrompt" style="display: none;">
							<i class="bi bi-border-width fs-1 text-secondary"></i>
							<span class="fs-3 text-secondary">Empty Prompt</span>
						</div>
					`;

			s_promptContainer.append(emptyPrompt);
			$('#s_emptyPrompt').slideDown(200);
		}

		function s_checkPromptValue(inputElement) {
			if ($(inputElement).val().trim() === '') {
				$(inputElement).closest('.s-prompt-container').slideUp(300, function () {
					$(this).remove();

					s_itemList.pop();
					s_appendItemsOnPrompt();

					if ($('.s-prompt-container').length === 0) {
						s_showEmptyPrompt();
					}
				});
			}
		}

		function s_addPrompt() {
			$('#s_emptyPrompt').remove();

			s_prompts++;

			var promptValue = s_item.val();

			var promptItem = `
						<div class="col-sm-12 col-md-12 mb-4 mb-md-2 s-prompt-container" id="s_prompt_container_${s_prompts}" style="display: none;">
							<div class="row">
								<div class="col-3 col-md-3">
									<select class="form-select form-select-lg s-prompt-item-select-list" aria-label="Items" style="height: 55px;">
									</select>
								</div>
								<div class="col-9 col-md-6">
									<div class="form-floating w-100">
										<input type="text" class="form-control" id="s_prompt_${s_prompts}" placeholder="Prompt" maxlength="100" value="${promptValue}" onchange="s_checkPromptValue(this)">
										<label for="s_prompt_${s_prompts}">Prompt</label>
									</div>
								</div>
								<div class="col-sm-12 col-md-3 mt-2 mt-md-0">
									<div class="rounded w-100 h-100 d-flex align-items-center justify-content-center"
										style="border: #dee2e6; border-style: dashed; cursor: pointer;"
										onclick="uploadImage('#s_prompt_image_container_${s_prompts}', '#s_prompt_input_image_file_${s_prompts}')">
										<div id="s_prompt_image_container_${s_prompts}" class="custom-image-container rounded" style="height: 55px;">
											<i class="bi bi-card-image fs-3 text-secondary"></i>
										</div>
									</div>
									<input type="file" id="s_prompt_input_image_file_${s_prompts}" accept="image/*" style="display: none;" />
								</div>
							</div>
						</div>
					`;

			s_promptContainer.append(promptItem);
			$(`#s_prompt_container_${s_prompts}`).slideDown(300);

			s_appendItemsOnPrompt();
		}

		function s_checkItemList() {
			if (s_itemList.length >= 1) {
				if (s_itemList.length === 1) {
					s_promptContainer.empty();

					const headerTitle = '<h4>Prompts</h4>';
					s_promptContainer.append(headerTitle);
				}

				s_addPrompt();
			}
		}

		function s_checkItemInput() {
			var trimmedItem = s_item.val().trim();

			if (trimmedItem === '') {
				$('#s_addItemButton').prop('disabled', true);
			} else {
				$('#s_addItemButton').prop('disabled', false);
			}
		}

		function sequencingHidden() {
			$('#s_instruction').val('');
			$('#s_input_points').val(1);
			removeImage('#s_instruction_image_container', '#s_input_image_file', event);
			s_showEmptyList();
			s_promptContainer.empty();
			s_itemList.length = 0;
			s_item.val('');
			s_prompts = 0;
			sequencingData = {
				quizId: 0,
				description: '',
				order: '',
				questionType: 0,
				points: 0,
				image: '',
				items: [],
				answers: [],
				active: false
			};
			clearValidationMessages(3);
		}

		function sequencingShown() {
			$('#s_instruction').val('');
			$('#s_input_answer').val('');
			$('#s_input_points').val(1);
		}

		s_checkItemInput();
	</script>

	<!-- Numeric Script -->
	<script>
		var numericData = {
			quizId: 0,
			description: '',
			order: '',
			questionType: 0,
			points: 0,
			image: '',
			answers: [],
			items: [],
			answers: false
		};

		var e_numericData = {
			id: 0,
			description: '',
			order: 0,
			questionType: 0,
			points: 0,
			image: '',
			answers: [],
			items: [],
			active: false
		};

		function gatherEditedNumericData() {
			e_numericData.id = parseInt($('#e_num_id').val());
			e_numericData.description = $('#e_num_question').val();
			e_numericData.questionType = 4;
			e_numericData.order = parseInt($('#e_num_order').val());
			e_numericData.points = parseInt($('#e_num_input_points').val());
			e_numericData.image = null;
			e_numericData.active = true;
			e_numericData.answers = [];
			e_numericData.items = [];

			if ($('#e_num_question_image_container img').attr('src')) {
				var base64Image = $('#e_num_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				e_numericData.image = base64Data;
			}

			e_numericData.answers.push({
				id: parseInt($('#e_num_a_id').val()),
				answer: $('#e_num_input_answer').val(),
				isCorrect: true,
				showAnswer: true,
				order: null,
				image: null,
				active: true
			});
		}

		function checkEditedNumeric() {
			questionType = 4;
			event.preventDefault();
			gatherEditedNumericData();
			clearValidationMessages(4);

			var points = e_numericData.points;
			var question = e_numericData.description;
			var numericAnswer = $('#e_num_input_answer').val();

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#e_num_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#e_num_question', 'Please enter a question.');
				valid = false;
			}

			if (numericAnswer === '') {
				showError('#e_num_input_answer', 'Please enter an answer.');
				valid = false;
			}

			if (valid) updateQuestion(e_numericData, 4);
		}

		function editNumeric(data) {
			$('#e_num_input_points').val(data.points);
			$('#e_num_question').val(data.description);
			$('#e_num_id').val(data.id);
			$('#e_num_order').val(data.order);

			var deleteButtonContainer = $('#e_num_deleteButtonContainer');

			deleteButtonContainer.empty();

			var deleteButton = `<button type="button" class="btn btn-danger text-start" onclick="removeQuestion(${data.id}, ${data.questionType});;">Delete</button>`

			deleteButtonContainer.append(deleteButton);

			if (data.image != '') {
				showImage('#e_num_question_image_container', '#e_num_input_image_file', data.image);
			} else {
				removeImage('#e_num_question_image_container', '#e_num_input_image_file', event);
			}

			$.each(data.answers, function (index, answer) {
				$('#e_num_a_id').val(answer.id);
				$('#e_num_a_order').val(answer.order);
				$('#e_num_input_answer').val(answer.answer).change();
			});

			$('#editNumericModal').modal('show');
		}

		function editNumericHidden() {
			loadQuestions();
			clearValidationMessages(4);
		}

		function gatherNumericData() {
			numericData.quizId = parseInt("@Model.QuizVM.Id");
			numericData.questionType = 4;
			numericData.description = $('#num_question').val();
			numericData.order = 0;
			numericData.points = parseInt($('#num_input_points').val());
			numericData.image = null;
			numericData.answers = [];
			numericData.items = [];
			numericData.active = true;

			if ($('#num_question_image_container img').attr('src') != null) {
				var base64Image = $('#num_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				numericData.image = base64Data;
			}

			var numberAnswer = $('#num_input_answer').val().trim();

			if (numberAnswer !== '') {
				numericData.answers.push({
					answer: numberAnswer,
					isCorrect: true,
					showAnswer: true,
					order: null,
					image: null,
					active: true
				});
			}
		}

		function checkNumeric() {
			event.preventDefault();
			gatherNumericData();
			clearValidationMessages(4);

			var points = numericData.points;
			var question = numericData.description;
			var answer = $('#num_input_answer').val().trim();

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#num_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#num_question', 'Please enter a question.');
				valid = false;
			}

			if (answer === '') {
				showError('#num_input_answer', 'Please enter a number.');
				valid = false;
			}

			if (valid) submitQuestion(numericData, 4);
		}

		function numericHidden() {
			$('#num_question').val('');
			$('#num_input_answer').val('');
			$('#num_input_points').val(1);
			removeImage('#num_question_image_container', '#num_input_image_file', event);
			clearValidationMessages(4);
			numericData = {
				quizId: 0,
				description: '',
				order: '',
				questionType: 0,
				points: 0,
				image: '',
				answers: [],
				items: [],
				answers: false
			};
		}

		function numericShown() {
			$('#num_question').val('');
			$('#num_input_answer').val('');
			$('#num_input_points').val(1);
		}
	</script>

	<!-- Enumeration Script -->
	<script>
		var enum_container = $('#enum_answer_container');
		var e_enum_container = $('#e_enum_answer_container');
		var enum_answers = 0;
		var e_enum_answers = 0;
		var enum_minimum_answers = 2;
		var enumerationData = {
			quizId: 0,
			description: '',
			order: '',
			questionType: 0,
			points: 0,
			image: '',
			answers: [],
			items: [],
			active: false
		};

		var e_enumerationData = {
			id: 0,
			description: '',
			order: 0,
			questionType: 0,
			points: 0,
			image: '',
			answers: [],
			items: [],
			active: false
		};

		function gatherEditedEnumerationData() {
			e_enumerationData.id = parseInt($('#e_enum_id').val());
			e_enumerationData.description = $('#e_enum_question').val();
			e_enumerationData.questionType = 5;
			e_enumerationData.order = parseInt($('#e_enum_order').val());
			e_enumerationData.points = parseInt($('#e_enum_input_points').val());
			e_enumerationData.image = null;
			e_enumerationData.active = true;
			e_enumerationData.answers = [];
			e_enumerationData.items = [];

			if ($('#e_enum_question_image_container img').attr('src')) {
				var base64Image = $('#e_enum_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				e_enumerationData.image = base64Data;
			}

			$('#e_enum_answer_container .e-more-answer-input').each(function (index) {
				const answer = $(this).val().trim();
				const answerId = $(this).closest('.e-enum-answer-container').find('input.e-enum-a-id').val();
				const hasId = answerId != '' ? answerId : 0;

				if (answer) e_enumerationData.answers.push({
					id: parseInt(hasId),
					answer: answer,
					isCorrect: true,
					showAnswer: false,
					order: null,
					image: null,
					active: true
				});
			});
		}

		function checkEditedEnumeration() {
			event.preventDefault();
			gatherEditedEnumerationData();
			clearValidationMessages(5);

			var points = e_enumerationData.points;
			var question = e_enumerationData.description;
			var answer1 = $('#e_enum_more_answer_1').val().trim();
			var answer2 = $('#e_enum_more_answer_2').val().trim();

			$.each(e_enumerationData.answers, function (index, answer) {
				if (answer.showAnswer == 1) {
					enumerationAnswer = answer.answer;
				}
			});

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#e_enum_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#e_enum_question', 'Please enter a question.');
				valid = false;
			}

			if (answer1 === '') {
				showError('#e_enum_more_answer_1', 'Please enter an answer.');
				valid = false;
			}

			if (answer2 === '') {
				showError('#e_enum_more_answer_2', 'Please enter an answer.');
				valid = false;
			}

			if (valid) updateQuestion(e_enumerationData, 5);
		}

		function e_checkMoreAnswerInput(inputElement) {
			var enumAnswer = $('.e-enum-answer-container');

			if ($(inputElement).val().trim() === '') {
				if (enumAnswer.length > enum_minimum_answers) {
					$(inputElement).closest('.e-enum-answer-container').slideUp(300, function () {
						$(this).remove();
					});
				}
			}
		}

		function e_addMoreAnswer() {
			e_enum_answers++;

			var moreAnswer = `
						<div class="col-12 mb-2 e-enum-answer-container" id="e_enum_answer_container_${e_enum_answers}" style="display: none;">
							<div class="row">
								<div class="col-12">
									<div class="form-floating w-100">
										<input type="text" class="form-control e-more-answer-input" id="e_enum_more_answer_${e_enum_answers}" placeholder="Answer" maxlength="100" value="Answer ${e_enum_answers}" onchange="e_checkMoreAnswerInput(this)">
										<label for="e_enum_more_answer_${e_enum_answers}">Answer</label>
									</div>
								</div>
							</div>
						</div>
					`;

			e_enum_container.append(moreAnswer);
			$(`#e_enum_answer_container_${e_enum_answers}`).slideDown(300);
		}

		function editEnumeration(data) {
			$('#e_enum_input_points').val(data.points);
			$('#e_enum_question').val(data.description);
			$('#e_enum_id').val(data.id);
			$('#e_enum_order').val(data.order);

			var deleteButtonContainer = $('#e_enum_deleteButtonContainer');

			deleteButtonContainer.empty();

			var deleteButton = `<button type="button" class="btn btn-danger text-start" onclick="removeQuestion(${data.id}, ${data.questionType});;">Delete</button>`

			deleteButtonContainer.append(deleteButton);

			if (data.image != '') {
				showImage('#e_enum_question_image_container', '#e_enum_input_image_file', data.image);
			} else {
				removeImage('#e_enum_question_image_container', '#e_enum_input_image_file', event);
			}

			e_enum_container.empty();

			$.each(data.answers, function (index, answer) {
				if (answer.showAnswer) {
					$('#e_enum_a_id').val(answer.id);
					$('#e_enum_a_order').val(answer.order);
					$('#e_enum_input_answer').val(answer.answer).change();
				} else {
					e_enum_answers++;

					var moreAnswer = `
							<div class="col-12 mb-2 e-enum-answer-container" id="e_enum_answer_container_${e_enum_answers}" style="display: none;">
								<input type="hidden" class="e-enum-a-id" value="${answer.id}" />
								<div class="row">
									<div class="col-12">
										<div class="form-floating w-100">
											<input type="text" class="form-control e-more-answer-input" id="e_enum_more_answer_${e_enum_answers}" placeholder="Answer" maxlength="100" value="${answer.answer}" onchange="e_checkMoreAnswerInput(this)">
											<label for="e_enum_more_answer_${e_enum_answers}">Answer</label>
										</div>
									</div>
								</div>
							</div>
						`;

					e_enum_container.append(moreAnswer);
					$(`#e_enum_answer_container_${e_enum_answers}`).slideDown(300);
				}
			});

			$('#editEnumerationModal').modal('show');
		}

		function editEnumerationHidden() {
			loadQuestions();
			clearValidationMessages(5);
			e_enum_answers = 0;
		}

		function gatherEnumerationData() {
			enumerationData.quizId = parseInt("@Model.QuizVM.Id");
			enumerationData.questionType = 5;
			enumerationData.description = $('#enum_question').val().trim();
			enumerationData.order = 0;
			enumerationData.points = parseInt($('#enum_input_points').val());
			enumerationData.image = null;
			enumerationData.answers = [];
			enumerationData.items = [];
			enumerationData.active = true;

			if ($('#enum_question_image_container img').attr('src') != null) {
				var base64Image = $('#enum_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				enumerationData.image = base64Data;
			}

			$('#enum_answer_container .more-answer-input').each(function () {
				const answer = $(this).val().trim();
				if (answer) enumerationData.answers.push({
					answer: answer,
					isCorrect: true,
					showAnswer: false,
					order: null,
					active: true
				});
			});
		}

		function checkEnumeration() {
			event.preventDefault();
			gatherEnumerationData();
			clearValidationMessages(5);

			var points = enumerationData.points;
			var question = enumerationData.description;
			var answer1 = $('#enum_more_answer_1').val().trim();
			var answer2 = $('#enum_more_answer_2').val().trim();

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#enum_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#enum_question', 'Please enter a question.');
				valid = false;
			}

			if (answer1 === '') {
				showError('#enum_more_answer_1', 'Please enter an answer.');
				valid = false;
			}

			if (answer2 === '') {
				showError('#enum_more_answer_2', 'Please enter an answer.');
				valid = false;
			}

			if (valid) submitQuestion(enumerationData, 5);
		}

		function checkAnswerInput() {
			var enumAnswer = $('.enum-answer-container');

			if (enumAnswer.length < enum_minimum_answers) {
				addMoreAnswer();

				setTimeout(function () {
					checkAnswerInput();
				}, 0);
			}
		}

		function checkMoreAnswerInput(inputElement) {
			var enumAnswer = $('.enum-answer-container');

			if ($(inputElement).val().trim() === '') {
				if (enumAnswer.length > enum_minimum_answers) {
					$(inputElement).closest('.enum-answer-container').slideUp(300, function () {
						$(this).remove();
					});
				}
			}
		}

		function addMoreAnswer() {
			enum_answers++;

			var moreAnswer = `
						<div class="col-12 mb-2 enum-answer-container" id="answer_container_${enum_answers}" style="display: none;">
							<div class="row">
								<div class="col-12">
									<div class="form-floating w-100">
										<input type="text" class="form-control more-answer-input" id="enum_more_answer_${enum_answers}" placeholder="Answer" maxlength="100" value="Answer ${enum_answers}" onchange="checkMoreAnswerInput(this)">
										<label for="enum_more_answer_${enum_answers}">Answer</label>
									</div>
								</div>
							</div>
						</div>
					`;

			enum_container.append(moreAnswer);
			$(`#answer_container_${enum_answers}`).slideDown(300);
		}

		function enumerationHidden() {
			$('#enum_question').val('');
			$('#enum_input_answer').val('');
			$('#enum_input_points').val(1);
			enum_answers = 0;
			enum_container.empty();
			removeImage('#enum_question_image_container', '#enum_input_image_file', event);
			clearValidationMessages(5);
			enumerationData = {
				quizId: 0,
				description: '',
				order: '',
				questionType: 0,
				points: 0,
				image: '',
				answers: [],
				items: [],
				active: false
			};
		}

		function enumerationShown() {
			$('#enum_question').val('');
			$('#enum_input_answer').val('');
			$('#enum_input_points').val(1);
			checkAnswerInput();
		}
	</script>

	<!-- Fill in the Blank Script -->
	<script>
		var fill_container = $('#fill_answer_container');
		var e_fill_container = $('#e_fill_answer_container');
		var fill_answers = 0;
		var e_fill_answers = 0;
		var fillInTheBlankData = {
			quizId: 0,
			description: '',
			order: '',
			questionType: 0,
			points: 0,
			image: '',
			answers: [],
			items: [],
			active: false
		};

		var e_fillInTheBlankData = {
			id: 0,
			description: '',
			order: 0,
			questionType: 0,
			points: 0,
			image: '',
			answers: [],
			items: [],
			active: false
		};

		function e_checkAlternativeAnswerInput(inputElement) {
			if ($(inputElement).val().trim() === '') {
				$(inputElement).closest('.e-fill-answer-container').slideUp(300, function () {
					$(this).remove();
				});
			}
		}

		function e_addAlternativeAnswer() {
			e_fill_answers++;

			var alternativeAnswer = `
							<div class="col-12 mb-2 e-fill-answer-container" id="e_fill_answer_container_${e_fill_answers}" style="display: none;">
								<input type="hidden" class="e-fill-a-id" />
								<div class="row">
									<div class="col-11">
										<div class="form-floating w-100">
											<input type="text" class="form-control e-alternative-answer-input" id="e_fill_alt_answer_${e_fill_answers}" placeholder="Alternative Answer" maxlength="100" value="Other Answer" onchange="e_checkAlternativeAnswerInput(this)">
											<label for="e_fill_alt_answer_${e_fill_answers}">Alternative Answer</label>
										</div>
									</div>
									<div class="col-1 d-flex align-items-center">
										<i class="bi bi-eye-slash fs-4 text-success" title="This answer will not be visible for the participants."></i>
									</div>
								</div>
							</div>
						`;

			e_fill_container.append(alternativeAnswer);
			$(`#e_fill_answer_container_${e_fill_answers}`).slideDown(300);
		}

		function gatherEditedFillInTheBlankData() {
			e_fillInTheBlankData.id = parseInt($('#e_fill_id').val());
			e_fillInTheBlankData.description = $('#e_fill_question').val();
			e_fillInTheBlankData.questionType = 6;
			e_fillInTheBlankData.order = parseInt($('#e_fill_order').val());
			e_fillInTheBlankData.points = parseInt($('#e_fill_input_points').val());
			e_fillInTheBlankData.image = null;
			e_fillInTheBlankData.active = true;
			e_fillInTheBlankData.answers = [];
			e_fillInTheBlankData.items = [];

			if ($('#e_fill_question_image_container img').attr('src')) {
				var base64Image = $('#e_fill_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				e_fillInTheBlankData.image = base64Data;
			}

			e_fillInTheBlankData.answers.push({
				id: parseInt($('#e_fill_a_id').val()),
				answer: $('#e_fill_input_answer').val(),
				isCorrect: true,
				showAnswer: true,
				order: null,
				image: null,
				active: true
			});

			$('#e_fill_answer_container .e-alternative-answer-input').each(function (index) {
				const answer = $(this).val().trim();
				const alternativeId = $(this).closest('.e-fill-answer-container').find('input.e-fill-a-id').val();
				const hasId = alternativeId != '' ? alternativeId : 0;

				if (answer) e_fillInTheBlankData.answers.push({
					id: parseInt(hasId),
					answer: answer,
					isCorrect: true,
					showAnswer: false,
					order: null,
					image: null,
					active: true
				});
			});
		}

		function checkEditedFillInTheBlank() {
			event.preventDefault();
			gatherEditedFillInTheBlankData();
			clearValidationMessages(6);

			var points = e_fillInTheBlankData.points;
			var question = e_fillInTheBlankData.description;
			var fillInTheBlankAnswer = '';

			$.each(e_fillInTheBlankData.answers, function (index, answer) {
				if (answer.showAnswer == 1) {
					fillInTheBlankAnswer = answer.answer;
				}
			});

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#e_fill_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#e_fill_question', 'Please enter a question.');
				valid = false;
			}

			if (fillInTheBlankAnswer == '') {
				showError('#e_fill_input_answer', 'Please enter an answer.');
				valid = false;
			}

			if (valid) updateQuestion(e_fillInTheBlankData, 6);
		}

		function editFillInTheBlank(data) {
			$('#e_fill_input_points').val(data.points);
			$('#e_fill_question').val(data.description);
			$('#e_fill_id').val(data.id);
			$('#e_fill_order').val(data.order);

			var deleteButtonContainer = $('#e_fill_deleteButtonContainer');

			deleteButtonContainer.empty();

			var deleteButton = `<button type="button" class="btn btn-danger text-start" onclick="removeQuestion(${data.id}, ${data.questionType});;">Delete</button>`

			deleteButtonContainer.append(deleteButton);

			if (data.image != '') {
				showImage('#e_fill_question_image_container', '#e_fill_input_image_file', data.image);
			} else {
				removeImage('#e_fill_question_image_container', '#e_fill_input_image_file', event);
			}

			e_fill_container.empty();

			$.each(data.answers, function (index, answer) {
				if (answer.showAnswer) {
					$('#e_fill_a_id').val(answer.id);
					$('#e_fill_a_order').val(answer.order);
					$('#e_fill_input_answer').val(answer.answer).change();
				} else {
					e_fill_answers++;

					var alternativeAnswer = `
								<div class="col-12 mb-2 e-fill-answer-container" id="e_fill_answer_container_${e_fill_answers}" style="display: none;">
									<input type="hidden" class="e-fill-a-id" value="${answer.id}" />
									<div class="row">
										<div class="col-11">
											<div class="form-floating w-100">
												<input type="text" class="form-control e-alternative-answer-input" id="e_fill_alt_answer_${e_fill_answers}" placeholder="Alternative Answer" maxlength="100" value="${answer.answer}" onchange="e_checkAlternativeAnswerInput(this)">
												<label for="e_fill_alt_answer_${e_fill_answers}">Alternative Answer</label>
											</div>
										</div>
										<div class="col-1 d-flex align-items-center">
											<i class="bi bi-eye-slash fs-4 text-success" title="This answer will not be visible for the participants."></i>
										</div>
									</div>
								</div>
							`;

					e_fill_container.append(alternativeAnswer);
					$(`#e_fill_answer_container_${e_fill_answers}`).slideDown(300);
				}
			});

			$('#editFillInTheBlankModal').modal('show');
		}

		function editFillInTheBlankHidden() {
			loadQuestions();
			clearValidationMessages(6);
		}

		function gatherFillInTheBlankData() {
			fillInTheBlankData.quizId = parseInt("@Model.QuizVM.Id");
			fillInTheBlankData.questionType = 6;
			fillInTheBlankData.description = $('#fill_question').val().trim();
			fillInTheBlankData.order = 0;
			fillInTheBlankData.points = parseInt($('#fill_input_points').val());
			fillInTheBlankData.image = null;
			fillInTheBlankData.answers = [];
			fillInTheBlankData.items = [];
			fillInTheBlankData.active = true;

			if ($('#fill_question_image_container img').attr('src') != null) {
				var base64Image = $('#fill_question_image_container img').attr('src');
				var base64Data = base64Image.split(',')[1];

				fillInTheBlankData.image = base64Data;
			}

			var mainAnswer = $('#fill_input_answer').val().trim();

			if (mainAnswer !== '') {
				fillInTheBlankData.answers.push({
					answer: mainAnswer,
					isCorrect: true,
					showAnswer: true,
					order: null,
					active: true
				});
			}

			$('#fill_answer_container .alternative-answer-input').each(function () {
				const answer = $(this).val().trim();
				if (answer) fillInTheBlankData.answers.push({
					answer: answer,
					isCorrect: true,
					showAnswer: false,
					order: null,
					active: true
				});
			});
		}

		function checkFillInTheBlank() {
			event.preventDefault();
			gatherFillInTheBlankData();
			clearValidationMessages(6);

			var points = fillInTheBlankData.points;
			var question = fillInTheBlankData.description;
			var answer = $('#fill_input_answer').val().trim();

			var valid = true;

			if (!isValidNumber(points)) {
				showError('#fill_input_points', 'Points must be between 1 and 100.');
				valid = false;
			}

			if (!isValidQuestion(question)) {
				showError('#fill_question', 'Please enter a question.');
				valid = false;
			}

			if (answer === '') {
				showError('#fill_input_answer', 'Please enter an answer.');
				valid = false;
			}

			if (valid) submitQuestion(fillInTheBlankData, 6);
		}

		function checkAlternativeAnswerInput(inputElement) {
			if ($(inputElement).val().trim() === '') {
				$(inputElement).closest('.fill-answer-container').slideUp(300, function () {
					$(this).remove();
				});
			}
		}

		function addAlternativeAnswer() {
			fill_answers++;

			var alternativeAnswer = `
							<div class="col-12 mb-2 fill-answer-container" id="fill_answer_container_${fill_answers}" style="display: none;">
								<div class="row">
									<div class="col-11">
										<div class="form-floating w-100">
											<input type="text" class="form-control alternative-answer-input" id="fill_alt_answer_${fill_answers}" placeholder="Alternative Answer" maxlength="100" value="Other Answer" onchange="checkAlternativeAnswerInput(this)">
											<label for="fill_alt_answer_${fill_answers}">Alternative Answer</label>
										</div>
									</div>
									<div class="col-1 d-flex align-items-center">
										<i class="bi bi-eye-slash fs-4 text-success" title="This answer will not be visible for the participants."></i>
									</div>
								</div>
							</div>
						`;

			fill_container.append(alternativeAnswer);
			$(`#fill_answer_container_${fill_answers}`).slideDown(300);
		}

		function fillInTheBlankHidden() {
			$('#fill_question').val('');
			$('#fill_input_answer').val('');
			$('#fill_input_points').val(1);
			fill_answers = 0;
			fill_container.empty();
			removeImage('#fill_question_image_container', '#fill_input_image_file', event);
			clearValidationMessages(6);
			fillInTheBlankData = {
				quizId: 0,
				description: '',
				order: '',
				questionType: 0,
				points: 0,
				image: '',
				answers: [],
				items: [],
				active: false
			};
		}

		function fillInTheBlankShown() {
			$('#fill_question').val('');
			$('#fill_input_answer').val('');
			$('#fill_input_points').val(1);
		}
	</script>
}